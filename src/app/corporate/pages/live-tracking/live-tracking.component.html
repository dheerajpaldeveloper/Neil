<!-- <input class="form-control" type="text" placeholder="click to show datepicker" id="example1"> -->
<div class="topSpacing">
    <button
        style="background-color:rgb(16, 108, 200); color: white; min-height: 28px !important; margin-bottom: 6px; padding: 7px 15px;   position: absolute;    z-index: 9999999999999999;    top: -9%;    min-width: 150px;    right: 22%;"
        (click)="newRideModeSelect()" [hidden]="!tabletScreen" class="btn btn-primary newRide-button">New Ride
        Request</button>
    <div class="container container-lg" id="Trips">
        <div class="row" style="margin-right: 0px;">
            <div class="col-auto" id="leftSidebar">
                <div class="page-new p-0">
                    <div style="padding:8px;padding-top:0px;margin: 0;">
                        <div class="search card-shadow">
                            <div class="search-box">
                                <input type="search" id="search" name="search" placeholder="Type to Search" class="form-control"
                                    [(ngModel)]="searchString" [formControl]="searchForm" autocomplete="off" />
                            </div>
                            <hr>
    
                            <div class="row tab-bar m-2">
                                <div class="col" [class.active]="left.selectedIndex == 0" (click)="setSelectedTab(0); collapseDisc()">Completed</div>
                                <div class="col" [class.active]="left.selectedIndex == 1" (click)="setSelectedTab(1); collapseDisc()">Scheduled</div>
                                <div class="col mr-1" [class.active]="left.selectedIndex == 2" (click)="setSelectedTab(2); collapseDisc()">Regular</div>
                            </div>
                            <!-- <div class="col-xl-6  col-lg-12 newride-box">
                                <button
                                    style="background-color:rgb(16, 108, 200); color: white; min-height: 28px !important; margin-bottom: 6px; padding: 8px 8px !important;"
                                    (click)="newRideModeSelect()" [hidden]="newRideMode"
                                    class="btn btn-primary newRide-button">New Ride Request</button>
                            </div> -->
                        </div>
                    </div>
                    
                
                        <div id="trip_detail_data" style="padding:0px 8px 8px">
                            <ng-container *ngIf="left.selectedIndex == 0">
                                <div class="card-shadow" *ngFor="let data of completedRides | ListFilter: 'user_name': searchString; let i=index"
                                (click)="showTripDetail(); showonm(data); expandDisc(data,i); check(data); this.active_trip_data='completed-ride-'+i"
                                [class.active_trip_data]="this.active_trip_data == 'completed-ride-'+i">
                                    <div class="user-name">
                                        {{data.user_name}}
                                    </div>
                                    <div class="time">
                                        {{data.drop_time|date:'MM/dd/yyyy'}} | {{data.drop_time|date:'HH:mm a'}} - ({{data.tzName}})
                                    </div>
                                    <div class="status-label">
                                        Completed
                                    </div>
                                </div>
                            </ng-container>

                            <ng-container *ngIf="left.selectedIndex == 1">
                                <div class="card-shadow" *ngFor="let data of scheduledrides | ListFilter: 'user_name': searchString; let i=index"
                                (click)="showTripDetail();  showonm(data); expandDisc(data,i); check(data); this.active_trip_data='scheduled-ride-'+i"
                                [class.active_trip_data]="this.active_trip_data == 'scheduled-ride-'+i">
                                    <div class="user-name">
                                        {{data.user_name}}
                                    </div>
                                    <div class="time">
                                        {{data.pickup_time_processed|date:'MM/dd/yyyy'}} | {{data.pickup_time_processed|date:'HH:mm a'}} - ({{data.tzName}})
                                    </div>
                                    <div class="status-label status-color" [ngClass]="getButtonClass(data.ride_status,data.request_status,data.is_active)">
                                        <span class="cursor-pointer">{{getButtonText(data.ride_status,data.request_status,data.is_active)}}</span>
                                    </div>
                                </div>
                            </ng-container>

                            <ng-container *ngIf="left.selectedIndex == 2">
                                <div class="card-shadow" *ngFor="let data of regular_rides | ListFilter: 'user_name': searchString; let i=index" 
                                (click)="showTripDetail(); showonm(data); expandDisc(data,i); check(data); this.active_trip_data='regular-ride-'+i"
                                [class.active_trip_data]="this.active_trip_data == 'regular-ride-'+i">
                                    <div class="user-name">
                                        {{data.user_name}}
                                    </div>
                                    <div class="time">
                                        {{data.date|date:'MM/dd/yyyy'}} | {{data.date|date:'HH:mm a'}} - ({{data.tzName}})
                                    </div>
                                    <div class="status-label status-color" [ngClass]="getButtonClass(data.ride_status,data.request_status,data.is_active)">
                                        <span class="cursor-pointer">{{getButtonText(data.ride_status,data.request_status,data.is_active)}}</span>
                                    </div>
                                </div>
                            </ng-container>
                        </div>

                        <!-- ------------------------ -->
                        <div style="padding: 0px 8px;">
                            <div id="page-navigation-bar" class="card-shadow">
                                <hr>
                                <div *ngIf="left.selectedIndex == 0" class="page-content disable-select" align="center">
                                    <span>{{completedTo}} of {{totalItemsCompleted}}</span>&nbsp;&nbsp;
                                    <button class="cursor-pointer" [disabled]="hidePrevcompleted" (click)="pageChanged(completedCurrentPage-1,'completed')">Previous </button>&nbsp;
                                    <button class="cursor-pointer" [disabled]="hidePrevcompleted" (click)="pageChanged(1,'completed')" > |< </button>&nbsp;
                                    <button class="cursor-pointer" [disabled]="hideNextcompleted" (click)="pageChanged(completedPages,'completed')"> >| </button>&nbsp;
                                    <button class="cursor-pointer" [disabled]="hideNextcompleted" (click)="pageChanged(completedCurrentPage+1,'completed')">Next</button>
                                </div>

                                <!-- Remaining section / not-working -->
                                <div *ngIf="left.selectedIndex == 1" class="page-content disable-select" align="center">
                                    <span>{{scheduledTo}} of {{totalItemsScheduled}}</span>&nbsp;&nbsp;
                                    <button class="cursor-pointer" [disabled]="hidePrevscheduled" (click)="pageChanged(scheduledCurrentPage-1,'scheduled')">Previous </button>&nbsp;
                                    <button class="cursor-pointer" [disabled]="hidePrevscheduled" (click)="pageChanged(1,'scheduled')" > |< </button>&nbsp;
                                    <button class="cursor-pointer" [disabled]="hideNextscheduled" (click)="pageChanged(scheduledPages,'completed')"> >| </button>&nbsp;
                                    <button class="cursor-pointer" [disabled]="hideNextscheduled" (click)="pageChanged(scheduledCurrentPage+1,'scheduled')">Next</button>
                                </div>

                                <!-- Remaining section / not-working -->
                                <div *ngIf="left.selectedIndex == 2" class="page-content disable-select" align="center">
                                    <span>{{regularTo}} of {{totalItemsRegular}}</span>&nbsp;&nbsp;
                                    <button class="cursor-pointer" [disabled]="hidePrev" (click)="pageChanged(regularCurrentPage-1,'regular')">Previous </button>&nbsp;
                                    <button class="cursor-pointer" [disabled]="hidePrev" (click)="pageChanged(1,'regular')" > |< </button>&nbsp;
                                    <button class="cursor-pointer" [disabled]="hideNext" (click)="pageChanged(regularPages,'regular')"> >| </button>&nbsp;
                                    <button class="cursor-pointer" [disabled]="hideNext" (click)="pageChanged(regularCurrentPage+1,'regular')">Next</button>
                                </div>
                            </div>
                        </div>
                        <!-- ------------------------ -->

                    
                    <!-- <mat-content style="height: 100%;">
                        <mat-tab-group dynamicHeight md-border-bottom [selectedIndex]="left.selectedIndex"
                            style="height: 100%;" (selectedIndexChange)="setSelectedTab($event)">
                            <mat-tab [active]="completedTabActive" label="COMPLETED" id="completed"
                                (click)="collapseDisc()">
                                <div class="md-padding  tab-section">
                                    <div class="paging-head">
                                        <div class="paging-area">
                                            <span class="number-page hidden"
                                                style="display:none">{{completedCurrentPage}} -
                                                {{completedPages}} of {{totalItemsCompleted}}</span>
                                            <span class="number-page">{{completedFrom}} - {{completedTo}} of
                                                {{totalItemsCompleted}}</span>
                                            <button href="javascript:;" [ngClass]="{disabled:hidePrevcompleted==1}"
                                                [disabled]="hidePrevcompleted" class="paging-link"
                                                (click)="pageChanged(1,'completed')">| <i class="fa fa-angle-left"
                                                    aria-hidden="true"></i></button>
                                            <button href="javascript:;" [ngClass]="{disabled:hidePrevcompleted==1}"
                                                [disabled]="hidePrevcompleted" class="paging-link"
                                                (click)="pageChanged(completedCurrentPage-1,'completed')"><i
                                                    class="fa fa-angle-right" aria-hidden="true"></i>
                                            </button>
                                            <button href="javascript:;" [ngClass]="{disabled:hideNextcompleted==1}"
                                                [disabled]="hideNextcompleted"
                                                (click)="pageChanged(completedCurrentPage+1,'completed')"
                                                class="paging-link"><i class="fa fa-angle-right" aria-hidden="true"></i>
                                            </button>
                                            <button href="javascript:;" [ngClass]="{disabled:hideNextcompleted==1}"
                                                [disabled]="hideNextcompleted" class="paging-link"
                                                (click)="pageChanged(completedPages,'completed')"><i
                                                    class="fa fa-angle-right" aria-hidden="true"></i>
                                                |</button>
                                        </div>
                                        <hr>
                                    </div>
                                    <div class="table-full completed-rides ride-status">
                                        
                                        <div *ngFor="let data of completedRides; let i=index"
                                            (click)="showTripDetail(); showonm(data); expandDisc(data,i); check(data); "
                                            class="col-md-12 row singlerow listing"
                                            [ngClass]="{active : ('session_id' == routeState.key && data.session_id == routeState.id) }">
                                            <div class="col-md-8"><span class="customer-name">{{data.user_name}}</span>
                                                <br>
                                                <span class="pickup-date ">{{data.drop_time|date:'MM/dd/yyyy'}} </span>
                                                <span class="time pickup-date">{{data.drop_time|date:'HH:mm a'}}
                                                </span><span class="timezone pickup-date">({{data.tzName}})</span><br>
                                                
                                            </div>
                                            <div class="col-md-4 ride-status"><span class="cursor-pointer"
                                                    style="font-size: 16px;">Completed</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </mat-tab>

                            <mat-tab [active]="scheuleTabActive" label="Scheduled" id="scheduled"
                                (click)="collapseDisc()">
                                
                                <div class="md-padding tab-section">

                                    <div class="paging-head">
                                        <div class="paging-area">
                                            <span class="number-page hidden"
                                                style="display:none">{{scheduledCurrentPage}} -
                                                {{scheduledPages}} of {{totalItemsScheduled}}</span>
                                            <span class="number-page">{{scheduledFrom}} - {{scheduledTo}} of
                                                {{totalItemsScheduled}}</span>
                                            <button href="javascript:;" [ngClass]="{disabled:hidePrevscheduled==1}"
                                                [disabled]="hidePrevscheduled" class="paging-link"
                                                (click)="pageChanged(1,'scheduled')">| <i class="fa fa-angle-left"
                                                    aria-hidden="true"></i></button>
                                            <button href="javascript:;" [ngClass]="{disabled:hidePrevscheduled==1}"
                                                [disabled]="hidePrevscheduled" class="paging-link"
                                                (click)="pageChanged(scheduledCurrentPage-1,'scheduled')"><i
                                                    class="fa fa-angle-left" aria-hidden="true"></i>
                                            </button>
                                            <button href="javascript:;" [ngClass]="{disabled:hideNextscheduled==1}"
                                                [disabled]="hideNextscheduled"
                                                (click)="pageChanged(scheduledCurrentPage+1,'scheduled')"
                                                class="paging-link"><i class="fa fa-angle-right" aria-hidden="true"></i>
                                            </button>
                                            <button href="javascript:;" [ngClass]="{disabled:hideNextscheduled==1}"
                                                [disabled]="hideNextscheduled" class="paging-link"
                                                (click)="pageChanged(scheduledPages,'scheduled')"><i
                                                    class="fa fa-angle-right" aria-hidden="true"></i>
                                                |</button>
                                        </div>
                                        <hr>
                                    </div>
                                    <div class="table-full scheduled-rides ">
                                        
                                        <div *ngFor="let data of scheduledrides; let i=index"
                                            (click)="showTripDetail();  showonm(data); expandDisc(data,i); check(data); "
                                            class="col-md-12 row singlerow listing"
                                            [ngClass]="{active : ('session_id' == routeState.key && data.session_id == routeState.id) }">
                                            <div class="col-md-8"><span class="customer-name">{{data.User_firstname}}
                                                    {{data.User_lastname}}</span><br>
                                                <span
                                                    class="pickup-date ">{{data.pickup_time_processed|date:'MM/dd/yyyy'}}
                                                </span>
                                                <span
                                                    class="time pickup-date">{{data.pickup_time_processed|date:'HH:mm a'}}
                                                </span><span class="timezone pickup-date">({{data.tzName}})</span>
                                            </div>
                                            <div class="col-md-4 status-color ride-status"
                                                [ngClass]="getButtonClass(data.ride_status,data.request_status,data.is_active)">
                                                <span
                                                    class="cursor-pointer">{{getButtonText(data.ride_status,data.request_status,data.is_active)}}</span>
                                            </div>

                                        </div>
                                    </div>

                                </div>
                            </mat-tab>

                            <mat-tab [active]="regularTabActive" label="Regular" id="regular" (click)="collapseDisc()">
                                
                                <div class="md-padding tab-section">
                                    <div class="paging-head">
                                        <div class="paging-area">
                                            <span class="number-page">{{regularFrom}} - {{regularTo}} of
                                                {{totalItemsRegular}}</span>
                                            <button href="javascript:;" [ngClass]="{disabled:hidePrev==1}"
                                                [disabled]="hidePrev" class="paging-link"
                                                (click)="pageChanged(1,'regular')">| <i class="fa fa-angle-left"
                                                    aria-hidden="true"></i></button>
                                            <button href="javascript:;" [ngClass]="{disabled:hidePrev==1}"
                                                [disabled]="hidePrev" class="paging-link"
                                                (click)="pageChanged(regularCurrentPage-1,'regular')"><i
                                                    class="fa fa-angle-left" aria-hidden="true"></i>
                                            </button>
                                            <button href="javascript:;" [ngClass]="{disabled:hideNext==1}"
                                                [disabled]="hideNext" class="paging-link"
                                                (click)="pageChanged(regularCurrentPage+1,'regular')"><i
                                                    class="fa fa-angle-right" aria-hidden="true"></i>
                                            </button>
                                            <button href="javascript:;" [ngClass]="{disabled:hideNext==1}"
                                                [disabled]="hideNext" class="paging-link"
                                                (click)="pageChanged(regularPages,'regular')"><i
                                                    class="fa fa-angle-right" aria-hidden="true"></i>
                                                |</button>
                                        </div>
                                        <hr>
                                    </div>
                                    <div class="table-full regular-rides ">
                                        
                                        <div *ngFor="let data of regular_rides; let i =index"
                                            (click)="showTripDetail(); showonm(data); expandDisc(data,i); check(data); "
                                            class="col-md-12 row singlerow listing"
                                            [ngClass]="{active : ('session_id' == routeState.key && data.session_id == routeState.id) }">
                                            <div class="col-md-8"><span class="customer-name">{{data.User_firstname}}
                                                    {{data.User_lastname}}</span><br>
                                                <span class="pickup-date ">{{data.date|date:'MM/dd/yyyy'}} </span> <span
                                                    class="time pickup-date">{{data.date|date:'HH:mm a'}} </span><span
                                                    class="timezone pickup-date">({{data.tzName}})</span>
                                            </div>
                                            <div class="col-md-4 status-color ride-status"
                                                [ngClass]="getButtonClass(data.ride_status,data.request_status,data.is_active)">
                                                <span
                                                    class="cursor-pointer">{{getButtonText(data.ride_status,data.request_status,data.is_active)}}</span>
                                            </div>

                                        </div>

                                    </div>
                                </div>
                            </mat-tab>

                        </mat-tab-group>
                    </mat-content> -->
                </div>
            </div>

            <!--Left Expandable Bar Starts Here-->
            <!-- col-md-2 col-lg-4 col-xl-2 -->
            <!-- col-3 -->
            <!-- [ngClass]="{expandedView: classExpand == '1'}" -->
            <div class="col">
                <div class="middle-bar card-shadow" id="expandedDiv" [class.active-background]="!newRideMode">
                    <!-- <div class="table-panel"> -->
                        <!-- <div class=" trip-number-head pt-4 pb-2" [hidden]="!tripDetailMode"
                            style="color: #000; text-align: center;">
                            <span>{{tripnumber}}</span>
                            <a class="double text-right" [hidden]="!tabletScreen"
                                style="margin-left: 15px;    font-size: 54px;    padding-right: 1%;    color: #ada9a9;    line-height: 27px;    margin-bottom: 8px;    margin-top: 0;       display: inline-block;    position: absolute;    top: 15px;    margin-right: 10px;    right: 0;    font-weight: 100;"
                                (click)="collapseDisc()" aria-hidden="true" role="button" tabindex="0">×</a>
                        </div> -->

                        
                        <div class="tab-panel" style="position: -webkit-sticky; position: sticky; top: 0px;background-color: white;z-index: 2;">

                            <div class="row" *ngIf="returnRideMode">
                                <div class="col-auto px-0 ml-3 mr-auto">
                                    <div class="active-tab cursor-pointer" >Return Ride Request</div>
                                </div>
                                <div class="col-auto label" style="font-weight:600">
                                    <img src="assets/images/divider_black.svg" alt="divider">
                                      &nbsp; {{ tripnumber}} </div>
                            </div> 
                                

                            <div class="row" *ngIf="tripDetailMode">
                                <div class="col-auto px-0 ml-3">
                                    <div class="cursor-pointer" [class.active-tab]="active_trip_tab == 0" (click)="active_trip_tab = 0">Trip Details</div>
                                </div>
                                <div class="col-auto px-0 mr-auto">
                                    <div class="cursor-pointer" [class.active-tab]="active_trip_tab == 1" (click)="active_trip_tab = 1">Request Status</div>
                                </div>
                                <div class="col-auto label" style="font-weight: 600;">
                                    <img src="assets/images/divider_black.svg" alt="divider">
                                      &nbsp; {{tripnumber}} </div>
                            </div>

                            <div class="row" [hidden]="!newRideMode">
                                <div class="col-auto mr-auto px-0 ml-3">
                                    <div class="active-tab cursor-pointer" >New Ride Request</div>
                                </div>
                                <div class="col-auto label">
                                    <img src="assets/images/divider_black.svg" alt="divider">
                                      &nbsp; Enter Trip Details </div>
                            </div>
                        </div>

                        <div class="nr-section" [hidden]="!newRideMode">

                            <!-- <div class="col-md-12 ui-widget">
                                <h3>Trip Details</h3>
                                <a class="double text-right" [hidden]="!tabletScreen"
                                    style="margin-left: 15px;    font-size: 44px;    padding-right: 1%;    color: #ada9a9;    line-height: 27px;    margin-bottom: 8px;    margin-top: 0;       display: inline-block;    position: absolute;    top: -36px;    margin-right: 10px;    right: 0;    font-weight: 100;"
                                    (click)="collapseDisc()" aria-hidden="true" role="button" tabindex="0">×</a>
                            </div> -->

                            <div class="my-3 py-2">
                                <!-- <label>Passenger Name</label>
                                <span class="icon_input_livetrack position-absolute"><img src="/assets/img/user.png"
                                        alt="user-icon" src="/assets/img/user.png"></span>
                                <input id="userName" [(ngModel)]="booking.user_name" (input)="getNewUsers(1)" type="text"
                                    onkeypress="return /[a-z ]/i.test(event.key)" (focus)="getNewUsers(1)"
                                    (blur)="closeAC()" [ngModelOptions]="{ debounce: 400 }"
                                    class="form-control autocompleteClass user-input" placeholder="Enter Name" /> -->

                                <div class="row m-1" style="position:relative">
                                    <div class="col-auto ml-1">
                                        <!-- <img src="assets/images/person.svg" alt="person_icon"> -->
                                        <i class="fa fa-user" style="color: grey;"></i>
                                        &nbsp;&nbsp;&nbsp;
                                        <img src="assets/images/divider_blue.svg" alt="divider_blue">
                                    </div>
                                    <div class="col input-box mt-1 mb-2">
                                        <input id="userName" [(ngModel)]="booking.user_name" (input)="getNewUsers(1)" type="text"
                                        onkeypress="return /[a-z ]/i.test(event.key)" (focus)="getNewUsers(1)"
                                        (blur)="closeAC()" [ngModelOptions]="{ debounce: 400 }"
                                        class="autocompleteClass" placeholder="Passenger Name" autocomplete="off" />
                                    </div>

                                    <!-- name suggestion box -->

                                    <!-- style="max-width: 300px;margin-top:20px; margin-left:6px" -->
                                    <div class="myautocomplete card-shadow" [ngClass]="{hidden : closeAutocomplete == 1  }">
                                        <!-- <ul style="list-style: none; padding: 10px 10px 0 20px;">
                                            <li *ngFor="let user of Users; let i=index" style="padding: 5px 0;" id="{{user.user_id}}"
                                                class="closeAutocomplete cursor-pointer"
                                                (click)="selectThisUser(user.user_id,user.user_mobile,user.user_name)">
                                                <span class="search_name" style="word-break: break-word;">{{user.user_name}} </span> &nbsp; 
                                                <span class="search_mobile"> {{user.user_mobile}} </span></li>
                                            <li *ngIf="Users.length==0" class="text-center mt-3">No User Found...</li>
                                        </ul> -->
                                        <div class="name-list">
                                            <div class="name-item mt-1" *ngFor="let user of Users; let i=index" (click)="selectThisUser(user.user_id,user.user_mobile,user.user_name)">
                                                <div class="row mx-1 py-2 cursor-pointer">
                                                    <div class="col-auto">
                                                        <!-- <img src="assets/images/person.svg" alt="person_icon"> -->
                                                        <i class="fa fa-user" style="color: grey;"></i>
                                                        &nbsp;&nbsp;&nbsp;
                                                        <img src="assets/images/divider_blue_small.svg" alt="divider_blue">
                                                    </div>
                                                    <div class="col-auto input-box fixed_width">
                                                            {{user.user_name}}
                                                        &nbsp;&nbsp;&nbsp;
                                                        <img src="assets/images/divider_blue_small.svg" alt="divider_blue">
                                                    </div>
                                                    <div class="col-auto my-auto">
                                                        {{user.user_mobile}}
                                                    </div>
                                                </div>
                                            </div>
                                            <li *ngIf="Users.length==0" class="text-center m-3">No User Found...</li>
                                        </div>
                                        <hr style="padding: 2px; margin: 0 15px 15px;">

                                        <!-- <div class="text-center mb-4 mt-3">
                                            <button class="btn btn-outline-primary btn-md tripsbtn adddocbtn button-black mb-3 signUpBtn"
                                                style="float: none; background-color:black !important;" (click)="openAddUser()">Signup New User</button>
                                            <button class="btn btn-outline-primary btn-md tripsbtn adddocbtn button-grey signUpBtn"
                                                style="float: none; border:1px solid rgb(46, 173, 223) !important" (click)="closeAC()">Request Ride
                                                Without Signup</button>
                                        </div> -->

                                        <div class="text-center my-3 mx-4 button-wrapper" style="z-index: 3;">
                                            <div class="row">
                                                <div class="col-auto col-md-5 px-sm-1">
                                                    <button class="animate-show btn btn-dark button-black m-0 p-0" (click)="openAddUser()">
                                                        <i class="fa fa-user"></i>&nbsp;
                                                        Signup New User
                                                    </button>
                                                </div>
                                                <div class="col col-md-7 px-sm-1">
                                                    <button (click)="closeAC()" [disabled]="DisableSRR" class="animate-show btn btn-primary p-0 m-0">
                                                    Ride Request w/out Signup
                                                    &nbsp;<i class="fa fa-chevron-right"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- name suggestion box -->

                                </div>
                                <hr>
                            </div>

                            <div class="my-3 py-2">
                                <!-- <label>Phone Number</label> -->
                                <!-- <input id="phone" [(ngModel)]="booking.user_mobile" onkeypress="return isNumberKey(event)"
                                    (change)="showDirection(1); checkName();" class="form-control"
                                    placeholder="Enter Mobile" />
                                <input id="extPopTwo" type="hidden" [(ngModel)]="booking.countryCodeText"
                                    (change)="showDirection(1)" class="hidden" /> -->
                                <!-- <div class="row-input" id="live-track-mobile-field">
                                    <ngx-intl-tel-input [cssClass]="'custom form-control'" [resetSearchContainer]="true"
                                        [preferredCountries]="preferredCountries" [enableAutoCountrySelect]="true"
                                        [enablePlaceholder]="true" [searchCountryFlag]="true"
                                        [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]"
                                        [selectFirstCountry]="false" [selectedCountryISO]="countryToSet" [maxLength]="15"
                                        [tooltipField]="TooltipLabel.Name" [phoneValidation]="true"
                                        [separateDialCode]="separateDialCode" name="phone" [inputId]="'phone'"
                                        [formControl]="phoneNumber" [customPlaceholder]="'Enter Mobile Number'"
                                        (countryChange)="onCountryChange($event)">
                                    </ngx-intl-tel-input>
                                </div> -->

                                <div class="row m-1 mb-2">
                                    <div class="col-auto ml-1">
                                        <i class="fa fa-phone" style="color:grey"></i>
                                        &nbsp;&nbsp;&nbsp;
                                        <img src="assets/images/divider_blue.svg" alt="divider_blue">
                                    </div>
                                    <div class="col input-box mt-1">
                                        <div class="row-input" id="live-track-mobile-field">
                                            <ngx-intl-tel-input [cssClass]="'borderless-input'" [resetSearchContainer]="true"
                                                [preferredCountries]="preferredCountries" [enableAutoCountrySelect]="true"
                                                [enablePlaceholder]="true" [searchCountryFlag]="true"
                                                [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]"
                                                [selectFirstCountry]="false" [selectedCountryISO]="countryToSet" [maxLength]="15"
                                                [tooltipField]="TooltipLabel.Name" [phoneValidation]="true"
                                                [separateDialCode]="separateDialCode" name="phone" [inputId]="'phone'"
                                                [formControl]="phoneNumber" [customPlaceholder]="'Phone Number'"
                                                (countryChange)="onCountryChange($event)">
                                            </ngx-intl-tel-input>
                                        </div>
                                    </div>
                                </div>
                                <input type="hidden" name="extTwo" id="extPopTwo">
                                <hr>

                            </div>

                            <!-- <div class="position-relative w-100"> -->
                                <div class="my-3 py-2">
                                    <!-- <label>Pickup Location</label>
                                    <input id="pickup" class="form-control autocomplete" [(ngModel)]="booking.pickup_text"
                                        (change)="showDirection(1)" ng-blur="findPlace('pickup')"
                                        placeholder="Enter pickup location" /> -->

                                        <div class="row m-1 mr-2">
                                            <div class="col-auto ml-1">
                                                <img src="assets/images/pickup_location.svg" alt="pickup_icon">
                                                &nbsp;&nbsp;&nbsp;
                                                <img src="assets/images/divider_blue.svg" alt="divider_blue">
                                            </div>
                                            <div class="col input-box mt-1 mb-2">
                                            <input id="pickup" class="autocomplete" [(ngModel)]="booking.pickup_text"
                                                (change)="showDirection(1)" ng-blur="findPlace('pickup')"
                                                placeholder="Pickup Location" />
                                            </div>
                                            <div class="col-auto mr-2" class="swap-arrow cursor-pointer">
                                                <img (click)="swapLocation()" src="assets/images/swap_arrow.svg" alt="SWAP" />
                                            </div>
                                        </div>
                                        <hr>

                                </div>
                                <!-- <div class="swapper main ">
                                    <img class="img-swap" (click)="swapLocation()" src="/assets/img/swap.png" alt="SWAP" />
                                </div> -->
                            <!-- </div> -->
                                <div class="my-3 py-2">
                                    <!-- <label>Drop off Location</label>
                                    <input id="drop" class="form-control autocomplete" [(ngModel)]="booking.drop_text"
                                    (change)="showDirection(1)" ng-blur="findPlace('drop')"
                                    placeholder="Enter drop off location" /> -->

                                    <div class="row m-1 mr-2">
                                        <div class="col-auto ml-1">
                                            <img src="assets/images/drop_location.svg" alt="drop_location_icon">
                                            &nbsp;&nbsp;&nbsp;
                                            <img src="assets/images/divider_blue.svg" alt="divider_blue">
                                        </div>
                                        <div class="col input-box mt-1 mb-2">
                                            <input id="drop" class="autocomplete" [(ngModel)]="booking.drop_text"
                                            (change)="showDirection(1)" ng-blur="findPlace('drop')"
                                            placeholder="Drop off Location" />
                                        </div>
                                        <div class="col-auto mr-2" class="swap-arrow cursor-pointer">
                                            <img (click)="swapLocation()" src="assets/images/swap_arrow.svg" alt="SWAP" />
                                        </div>
                                    </div>
                                    <hr>
                                    
                                </div>

                            <!-- <div class="mt-1 mb-2 col-md-12">
                                <span>QudosEssentials {{dash}}</span>
                                <label class="switchers mt-1 float-right">
                                    <input type="checkbox" [(ngModel)]="qudos_essential" (click)="driver_refresh()"
                                        id="terms" class="terms">
                                    <span class="sliderchecks"></span>
                                </label>
                            </div> -->
                            <div class="my-3 py-2">
                                <!-- <label>Ride Type</label>
                                <select name="time" [(ngModel)]="booking.car_type" (change)="selectCarType()"
                                    class="form-control cursor-pointer" id="time-min">
                                    <option *ngFor="let obj of carsOptions; let i=index;" [value]="obj.car_type">
                                        {{obj.car_name}}</option>
                                </select> -->

                                <div class="row m-1 mb-0" style="position: relative;">
                                    <div class="col-auto ml-1">
                                        <img src="assets/images/ride_type.svg" alt="ride_type_icon">
                                        &nbsp;&nbsp;&nbsp;
                                        <img src="assets/images/divider_blue.svg" alt="divider_blue">
                                    </div>
                                    <div class="col input-box mt-1 mb-2" style="position: static;">
                                        <!-- <select name="time" [(ngModel)]="booking.car_type" (change)="selectCarType()"
                                        class="cursor-pointer" id="time-min">
                                        <option *ngFor="let obj of carsOptions; let i=index;" [value]="obj.car_type">
                                            {{obj.car_name}}</option>
                                        </select> -->
                                        <div class="dropdown">
                                            <span class="dropdown-toggle" type="button" id="ride_type_dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                               {{ carsOptions[ findIndex_from_objectArray('car_type', this.booking.car_type, carsOptions) ]['car_name'] || 'Ride Type' }}
                                            </span>
                                            <div class="dropdown-menu card-shadow pt-2 pb-3" id="ride_type_menu" style="transform: translate3d(0px, 397px, 0px)!important;" aria-labelledby="ride_type_dropdown">
                                                <ng-container *ngFor="let obj of carsOptions; let i=index;">
                                                    <div class="dropdown-item p-0">
                                                        <div class="row my-1 cursor-pointer p-0" (click)="booking.car_type = obj.car_type; selectCarType()">
                                                            <div class="col-auto ml-4">
                                                                <img src="assets/images/ride_type.svg" alt="ride_type_icon">
                                                                &nbsp;&nbsp;
                                                                <img src="assets/images/divider_blue.svg" alt="divider_blue">
                                                            </div>
                                                            <div class="col mt-1 item-label p-0"> {{obj.car_name}} </div>
                                                        </div>
                                                    </div>
                                                    <hr>
                                                </ng-container>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-auto mr-3" class="more-info cursor-pointer" (click)="carSelectorMode()">
                                        <i class="fa fa-exclamation-circle"></i> &nbsp;
                                        <span>More info</span>
                                    </div>

                                </div>
                                <hr>

                            </div>

                            <div class="my-3 py-2">
                                <!-- <label>Driver</label>
                                <select name="time" [(ngModel)]="booking.car_type" class="form-control cursor-pointer"
                                    (change)="selectCarType()" id="time-min">
                                    <option *ngFor="let obj of carDriverOptions; let i=index; " [value]="obj.car_type">
                                        {{obj.car_name }}</option>
                                </select> -->

                                <div class="row m-1" style="position: relative;">
                                    <div class="col-auto ml-1">
                                        <img src="assets/images/prefer_fav.svg" alt="prefer_fav_icon">
                                        &nbsp;&nbsp;&nbsp;
                                        <img src="assets/images/divider_blue.svg" alt="divider_blue">
                                    </div>
                                    <div class="col input-box mt-1 mb-2" style="position: static;">
                                        <!-- <select style="width:90%" name="time" [(ngModel)]="booking.car_type" class="cursor-pointer"
                                        (change)="selectCarType()" id="time-min">
                                        <option *ngFor="let obj of carDriverOptions; let i=index; " [value]="obj.car_type">
                                            {{obj.car_name }}</option>
                                        </select> -->
                                        <div class=" dropdown">
                                            <span class="dropdown-toggle" (click)="findDistance($event)" type="button" id="prefer_fav_dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                               <!-- {{carDriverOptions[0]['car_name'] || 'Ride Type'}} -->
                                               {{ carDriverOptions[ findIndex_from_objectArray('car_type', this.booking.car_type, carDriverOptions) ]['car_name'] || 'Prefer Fave' }}
                                            </span>
                                            <div class="dropdown-menu card-shadow pt-2 pb-3" id="prefer_ride_menu" aria-labelledby="prefer_fav_dropdown">
                                                <ng-container *ngFor="let obj of carDriverOptions; let i=index;">
                                                    <div class="dropdown-item p-0">
                                                        <div class="row my-1 cursor-pointer p-0" (click)="booking.car_type = obj.car_type; selectCarType()">
                                                            <div class="col-auto ml-4">
                                                                <img src="assets/images/prefer_fav.svg" alt="ride_type_icon">
                                                                &nbsp;&nbsp;
                                                                <img src="assets/images/divider_blue.svg" alt="divider_blue">
                                                            </div>
                                                            <div class="col mt-1 item-label p-0"> {{obj.car_name}} </div>
                                                        </div>
                                                    </div>
                                                    <hr>
                                                </ng-container>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-auto mr-2" class="more-info cursor-pointer" (click)="DriverSelectorMode()">
                                        <i class="fa fa-heart"></i> &nbsp;
                                        <span>Select QudosFave</span> &nbsp;
                                        <i class="fa fa-chevron-right"></i>
                                    </div>
                                </div>
                                <hr>

                            </div>

                            <!-- <div class="col-md-6 mb-2">
                                <label class="nr-label">About Ride Type</label>
                                <button class="btn btn-light btn-grey details-height more-details"
                                    (click)="carSelectorMode()">More&nbsp;Detail</button>
                            </div> -->

                            <!-- <div class="col-md-6 mb-2">
                                <label class="nr-label">Select Favorite Driver</label>
                                <button class="btn btn-dark button-black same-height"
                                    (click)="DriverSelectorMode()">QudosFave™</button>
                            </div> -->
                            <div class="my-2 py-1" id="health_checkbox">
                                <div class="row m-1">
                                    <div class="col-auto ml-2 mt-1">
                                            <div class="custom-checkbox" [class.selected]="health_policy_checkbox" (click)="health_policy_checkbox = !health_policy_checkbox">
                                                <i style="font-size: 10px;color:white;line-height:0" class="fa fa-check" aria-hidden="true"></i>
                                            </div>
                                        &nbsp;&nbsp;&nbsp;
                                    </div>
                                    <div class="col input-box disable-select">
                                        <label (click)="health_policy_checkbox = !health_policy_checkbox">I confirm to adhere to the latest CDC policies to stay informed, review health and safety measures taken about COVID-19.</label>
                                    </div>
                                </div>
                            </div>

                            <div *ngIf="loadings" class="loaders"> <span><img src="assets/app-img/ring-alt.svg"></span>
                            </div>
                        </div>

                        <div style="position: absolute; width: 100%; bottom: 2px;background-color: white;z-index:1">
                            <hr>
                            <div class="text-center btn_cs button-wrapper" *ngIf="newRideMode">
                                <!-- bookRideButton pull-right -->
                                <button href="javascript:;" (click)="getDataAndshowPopup()" [disabled]="DisableSRR"
                                    class=" animate-show btn btn-primary">
                                    Send Ride Request &nbsp;&nbsp;
                                    <i style="font-size:13px" class="fa fa-chevron-right"></i>
                                </button>
                            </div>

                            <div class="text-center my-3 mx-3 button-wrapper" *ngIf="tripDetailMode">
                                <div class="row">
                                    <div class="col" *ngIf="(ride_status == 4)">
                                        <button (click)="returnscheduleRide(rideInFocus); showReturn()"
                                            class="animate-show btn btn-secondary button-black">
                                            Return Ride Request
                                            <!-- &nbsp;
                                            <i style="font-size:13px" class="fa fa-chevron-right"></i> -->
                                        </button>
                                    </div>

                                    <div class="col" *ngIf="(ride_status == 4)">
                                        <button (click)="sendInvoice(rideInFocus)"
                                            class="animate-show btn btn-primary">
                                            Send Invoice
                                        </button>
                                    </div>

                                    <div class="col" *ngIf="((ride_status == 3) && is_schedule == 1) && (rideText=='Yes' )">
                                        <button (click)="returnscheduleRide(rideInFocus); showReturn()"
                                            class="animate-show btn btn-secondary button-black" >
                                            Schedule a Return Ride?
                                            <!-- &nbsp;
                                            <i style="font-size:13px" class="fa fa-chevron-right"></i> -->
                                        </button>
                                    </div>

                                    <div class="col" *ngIf="((ride_status == 3) && (is_schedule != 1)) && (rideText=='Yes')">
                                        <button (click)="returnscheduleRide(rideInFocus); showReturn()"
                                            class=" animate-show btn btn-dark button-black">
                                            Request a Return Ride?
                                            <!-- &nbsp;
                                            <i style="font-size:13px" class="fa fa-chevron-right"></i> -->
                                        </button>
                                    </div>

                                    <div class="col" *ngIf="(rideText=='Cancelled' || rideText=='Missed')">
                                        <button (click)="reTryRide(rideInFocus); showReturn()"
                                            class=" animate-show btn btn-secondary button-black" >
                                            Retry Ride Request?
                                            <!-- &nbsp;
                                            <i style="font-size:13px" class="fa fa-chevron-right"></i> -->
                                        </button>
                                    </div>

                                    <div class="col" *ngIf="(rideText=='No-enroute')">
                                        <button 
                                            class=" animate-show btn btn-secondary button-black" >
                                            Complete Ride
                                        </button>
                                    </div>

                                    <!-- remaining -->

                                    <div class="col" *ngIf="( (is_schedule != '0') && (ride_status != 1)) && (rideText=='Yes' )" >
                                        <button (click)="rescheduleRide(rideInFocus)"
                                            class=" animate-show btn btn-dark button-black"
                                            data-toggle="modal" data-target="#reschedule">
                                            Reschedule Ride
                                            <!-- &nbsp;
                                            <i style="font-size:13px" class="fa fa-chevron-right"></i> -->
                                        </button>
                                    </div>

                                    <div class="col" *ngIf="(rideText=='Yes')">
                                        <button (click)="cancelRidePopup(session_id)"
                                            class=" animate-show btn btn-dark button-black" 
                                            data-toggle="modal" data-target="#confirmRideCancel">
                                            Cancel Ride
                                            <!-- &nbsp;
                                            <i style="font-size:13px" class="fa fa-chevron-right"></i> -->
                                        </button>
                                    </div>

                                    <!-- fixed  -->
                                    <!-- <div class="col">
                                        <button href="javascript:;" (click)="newRideModeSelect()" [disabled]="DisableSRR"
                                            class=" animate-show btn btn-primary">
                                            New Ride Request  -->
                                            <!-- &nbsp;
                                            <i style="font-size:13px" class="fa fa-chevron-right"></i> -->
                                        <!-- </button>
                                    </div> -->
                                    <!-- -------- -->
                                </div>
                            </div>

                            <div class="text-center my-3 mx-3 button-wrapper" *ngIf="returnRideMode">
                                <div class="row">
                                    <div class="col">
                                        <!-- <a href="javascript:;" (click)="cancelReturn()"
                                        class="button-white pull-right animate-show mt-3">Cancel</a> -->
                                        <button class="animate-show btn btn-dark button-black" (click)="cancelReturn()">
                                            Cancel
                                        </button>
                                    </div>
                                    <div class="col">
                                        <button (click)="getDataAndshowPopup()" [disabled]="DisableSRR"
                                        class="animate-show btn btn-primary">Send Ride Request</button>
                                    </div>
                                </div>
                                <!-- <div *ngIf="loadings" class="loaders"> <span><img src="assets/app-img/ring-alt.svg"></span></div> -->
                            </div>

                        </div>

                        <div class="rr-section" [hidden]="!returnRideMode">
                            <!-- <div class="col-lg-12 col-sm-12 col-md-12 col-xs-12 mt-4">
                                <label
                                    style="font-size: 12px;font-weight: 400;color: #989898!important">Passenger</label><br>
                                <label style="background-color: #f9f9f9;font-size: 14px;color: #000">{{user_name}}
                                    <br>{{user_mobile}}</label>
                            </div> -->

                            <div class="mx-2">
                                <div class="row col-md-12 my-4 td-section">
                                    <!-- col-lg-12 col-sm-12 col-md-12 col-xs-12 -->
                                    <div class="col-auto mr-auto">
                                        <label class="l1">Passenger</label><br>
                                        <label class="l2">{{user_name}}<br>{{user_mobile}}</label>
                                    </div>
                                    <div class="col-auto">
                                        <img src="{{user_image}}" *ngIf="user_image!=''"
                                            style="border-radius:50%;" class="center-block image" />
                                        <img src="http://qudos-s3.s3.amazonaws.com/user_profile/user.png"
                                            *ngIf="user_image==''"
                                            style="border-radius:50%; "
                                            class="center-block image dummy" />
                                    </div>
                                </div>
                            </div>

                            <!-- <div class="col-lg-12 col-sm-12 col-md-12 col-xs-12  mt-3">
                                <label style="font-size: 12px;font-weight: 400;color: #989898!important">Ride Type</label><br>
                                <select name="time" [(ngModel)]="booking.car_type" class="form-control" id="time-min">
                                    <option *ngFor="let obj of carsOptions; let i=index;" [value]="obj.car_type">
                                        {{obj.car_name}}</option>
                                </select>
                            </div> -->

                             <div class="my-3 py-2">
                                <div class="row m-1 mb-0" style="position: relative;">
                                    <div class="col-auto ml-1">
                                        <img src="assets/images/ride_type.svg" alt="ride_type_icon">
                                        &nbsp;&nbsp;&nbsp;
                                        <img src="assets/images/divider_blue.svg" alt="divider_blue">
                                    </div>
                                    <div class="col input-box mt-1 mb-2" style="position: static;">
                                        <!-- <select name="time" [(ngModel)]="booking.car_type" (change)="selectCarType()"
                                        class="cursor-pointer" id="time-min">
                                        <option *ngFor="let obj of carsOptions; let i=index;" [value]="obj.car_type" [selected]="i == 0 && qudos_essential == 1">
                                            {{obj.car_name}}</option>
                                        </select> -->

                                        <div class="dropdown">
                                            <span class="dropdown-toggle" type="button" id="ride_type_dropdown_return" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" #currentRideType>
                                               {{ carsOptions[ findIndex_from_objectArray('car_type', this.booking.car_type, carsOptions) ]['car_name'] || 'Ride Type' }}
                                            </span>
                                            <div class="dropdown-menu card-shadow pt-2 pb-3" id="ride_type_menu_return" style="transform: translate3d(0px, 397px, 0px)!important;" aria-labelledby="ride_type_dropdown_return">
                                                <ng-container *ngFor="let obj of carsOptions; let i=index;">
                                                    <div class="dropdown-item p-0">
                                                        <div class="row my-1 cursor-pointer p-0" (click)="booking.car_type = obj.car_type; selectCarType()">
                                                            <div class="col-auto ml-4">
                                                                <img src="assets/images/ride_type.svg" alt="ride_type_icon">
                                                                &nbsp;&nbsp;
                                                                <img src="assets/images/divider_blue.svg" alt="divider_blue">
                                                            </div>
                                                            <div class="col mt-1 item-label p-0"> {{obj.car_name}} </div>
                                                        </div>
                                                    </div>
                                                    <hr>
                                                </ng-container>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="col-auto mr-2" class="more-info cursor-pointer" (click)="carSelectorMode()">
                                        <i class="fa fa-exclamation-circle"></i> &nbsp;
                                        <span>More info</span>
                                    </div>
                                </div>
                                <hr>
                            </div>


                            <!-- <div class="col-lg-12 col-sm-12 col-md-12 col-xs-12 mt-3">
                                <label style="font-size: 12px;font-weight: 400;color: #989898!important">Pickup Location</label><br>
                                <input name="pickup" id="return-pickup" class="form-control autocomplete"
                                    [(ngModel)]="booking.pickup_text_return" (change)="showDirection(1)"
                                    (blur)="findPlace('return-pickup')" placeholder="Enter pickup location" />
                            </div> -->

                            <div class="my-3 py-2">
                                    <div class="row m-1 mr-2">
                                        <div class="col-auto ml-1">
                                            <img src="assets/images/pickup_location.svg" alt="pickup_icon">
                                            &nbsp;&nbsp;&nbsp;
                                            <img src="assets/images/divider_blue.svg" alt="divider_blue">
                                        </div>
                                        <div class="col input-box mt-1 mb-2">
                                        <input id="return-pickup" name="pickup" class="autocomplete" [(ngModel)]="booking.pickup_text_return"
                                            (change)="showDirection(1)" (blur)="findPlace('return-pickup')"
                                            placeholder="Pickup Location" />
                                        </div>
                                        <div class="col-auto mr-2" class="swap-arrow cursor-pointer">
                                            <img (click)="swapLocationforReturn()" src="assets/images/swap_arrow.svg" alt="SWAP" />
                                        </div>
                                    </div>
                                    <hr>

                            </div>

                            <!-- <div class="swapper return">
                                <img class="img-swap" (click)="swapLocationforReturn()" src="/assets/img/swap.png"
                                    alt="SWAP" />
                            </div> -->

                            <!-- <div class="col-lg-12 col-sm-12 col-md-12 col-xs-12  mb-2">
                                <label style="font-size: 12px;font-weight: 400;color: #989898!important">Drop off
                                    Location</label><br>
                                <input name="drop" id="return-drop" class="form-control autocomplete"
                                    [(ngModel)]="booking.drop_text_return" (change)="showDirection(1)"
                                    (blur)="findPlace('return-drop')" placeholder="Enter drop off location" />
                            </div> -->

                            <div class="my-3 py-2">
                                <div class="row m-1 mr-2">
                                    <div class="col-auto ml-1">
                                        <img src="assets/images/drop_location.svg" alt="drop_location_icon">
                                        &nbsp;&nbsp;&nbsp;
                                        <img src="assets/images/divider_blue.svg" alt="divider_blue">
                                    </div>
                                    <div class="col input-box mt-1 mb-2">
                                        <input id="return-drop" name="drop" class="autocomplete" [(ngModel)]="booking.drop_text_return"
                                        (change)="showDirection(1)" (blur)="findPlace('return-drop')"
                                        placeholder="Drop off Location" />
                                    </div>
                                    <div class="col-auto mr-2" class="swap-arrow cursor-pointer">
                                        <img (click)="swapLocationforReturn()" src="assets/images/swap_arrow.svg" alt="SWAP" />
                                    </div>
                                </div>
                                <hr>
                            </div>


                            <!-- <div class="mt-4 mb-3 col-md-12" [hidden]="this.left.selectedIndex == 2">
                                <span>QudosEssentials {{dash}}</span>
                                <label class="switchers mt-1 float-right">
                                    <input name="term" type="checkbox" [(ngModel)]="qudos_essential" id="terms1"
                                        class="terms">
                                    <span class="sliderchecks"></span>
                                </label>
                            </div> -->
                            <!-- <button href="javascript:;"(click)="getDataAndshowPopup()" [disabled]="DisableSRR" class="btn bookRideButton pull-right animate-show greyShadow mb-2" >Send Ride Request</button> -->


                            <!-- <div *ngIf="loadings" class="loaders"> <span><img src="app/img/ring-alt.svg"></span></div> -->

                            <!-- <div class=" col-md-12 mt-4 text-center ">
                                <button href="javascript:;" (click)="getDataAndshowPopup()" [disabled]="DisableSRR"
                                    class="bookRideButton pull-right animate-show greyShadow mb-2">Send Ride
                                    Request</button>

                                <a href="javascript:;" (click)="cancelReturn()"
                                    class="button-white pull-right animate-show mt-3">Cancel</a>

                                <div *ngIf="loadings" class="loaders"> <span><img src="assets/app-img/ring-alt.svg"></span>
                                </div>
                            </div> -->
                        </div>


                        <div class="table td-section" [hidden]="!tripDetailMode">
                                
                            <div class="tdrs">

                                <div [hidden]="!tripDetailMode" *ngIf="active_trip_tab == 0">
                                    <div class="mx-2 mb-3">
                                        <div class="row col-md-12 mt-4 mb-1">
                                            <!-- col-lg-12 col-sm-12 col-md-12 col-xs-12 -->
                                            <div class="col-auto mr-auto">
                                                <label class="l1">Passenger</label><br>
                                                <label class="l2">{{user_name}}<br>{{user_mobile}}</label>
                                            </div>
                                            <div class="col-auto">
                                                <img src="{{user_image}}" *ngIf="user_image!=''"
                                                    style="border-radius:50%;" class="center-block image" />
                                                <img src="http://qudos-s3.s3.amazonaws.com/user_profile/user.png"
                                                    *ngIf="user_image==''"
                                                    style="border-radius:50%; "
                                                    class="center-block image dummy" />
                                            </div>
                                        </div>

                                        <div class="col-auto mb-1">
                                            <label class="l1">Ride Type</label><br>
                                            <label class="l2" >{{car_name}}</label>
                                            <!-- #008000 -->
                                            <label *ngIf="ride_essential == 1" style="font-size: 14px; font-weight: 600;color: #28a745"> - Essentials</label>

                                        </div>

                                        <!-- col-lg-12 col-sm-12 col-md-12 col-xs-12 -->
                                        <div class="col-auto mb-1">
                                            <label class="l1">Status</label><br>

                                            <span class="hidden hide">|| {{showStatus}} ||</span>

                                            <label class="l2">
                                                <span [innerHTML]="showStatus"></span>
                                            </label>


                                        </div>

                                        <!-- col-lg-12 col-sm-12 col-md-12 col-xs-12 -->
                                        <div class="col-auto mb-1">
                                            <label class="l1">Pickup Location</label><br>
                                            <label class="l2">{{pickup_location_address}}
                                            </label>
                                        </div>

                                        <!-- col-lg-12 col-sm-12 col-md-12 col-xs-12 -->
                                        <div class="col-auto mb-1">
                                            <label class="l1">Dropoff Location</label><br>
                                            <label class="l2">{{manual_destination_address}}
                                            </label>
                                        </div>
                                    </div>

                                    <hr>

                                    <div class="mx-2 my-3">
                                        <div class="row col-md-12 mt-2 mb-2 mb-1">
                                            <div class="col-auto mr-auto">
                                                <label class="user_type l1"> Driver</label><br>
                                                <label class="user_name l2" [hidden]="!(rideMissed != 'Yes' )">
                                                    {{driver_name}}<br>{{driver_mobile}}
                                                </label>
                                                <label class="user_name l2" [hidden]="!(rideMissed == 'Yes' )" >No Driver available</label>
                                            </div>
                                            <div class="col-auto">

                                                <img src="{{driver_image}}"
                                                    style="border-radius:50%;" class="center-block image" />
                                            </div>
                                        </div>
                                        <div class="col-auto" [hidden]="!(rideMissed != 'Yes' )">
                                            <label class="user_type l1">Car</label> <br>
                                            <label class="user_name l2">
                                                {{rideInFocus.car_name}} {{rideInFocus.car_make}}
                                                {{rideInFocus.car_no}}</label>
                                        </div>
                                    </div>


                                    <!-- <div class=" col-md-12 text-center button-wrapper"> -->

                                        <!-- <button type="button"
                                            class="btn btn-secondary button-black btn-full mt-2 black-btn"
                                            (click)="returnscheduleRide(rideInFocus); showReturn()"
                                            *ngIf="(ride_status == 4)">Return Ride Request</button> -->


                                        <!-- <button type="button"
                                            class="btn btn-secondary button-black btn-full mt-2"
                                            (click)="returnscheduleRide(rideInFocus); showReturn()"
                                            [hidden]="!(rideText=='Yes' )"
                                            *ngIf="( (ride_status == 3) && is_schedule == 1)">Schedule a
                                            Return
                                            Ride?</button> -->

                                        <!-- <button type="button"
                                            class="btn btn-secondary button-black btn-full mt-2"
                                            (click)="returnscheduleRide(rideInFocus); showReturn()"
                                            [hidden]="!(rideText=='Yes'  )"
                                            *ngIf="( (ride_status == 3) && (is_schedule != 1) )">Request a
                                            Return Ride?</button> -->

                                        <!-- <button type="button"
                                            class="btn btn-secondary button-black btn-full mt-2 btn-spacing"
                                            (click)="reTryRide(rideInFocus); showReturn()"
                                            [hidden]="!(rideText=='Cancelled' || rideText=='Missed' )">Retry
                                            a
                                            Ride Request?</button> -->

                                        <!-- <button type="button"
                                            class="btn btn-secondary button-black btn-full mt-2"
                                            (click)="rescheduleRide(rideInFocus)"
                                            [hidden]="!(rideText=='Yes' )"
                                            *ngIf="( (is_schedule != '0') && (ride_status != 1))"
                                            data-toggle="modal" data-target="#reschedule">Reschedule
                                            Ride</button> -->

                                        <!-- <button type="button" [hidden]="!(rideText=='Yes')"
                                            (click)="cancelRidePopup(session_id)" data-toggle="modal"
                                            data-target="#confirmRideCancel"
                                            class="btn btn-full button-white greyShadow mt-2 mb-3">Cancel
                                            Ride</button> -->

                                    <!-- </div> -->
                                </div>

                                <!--  -->

                                <!--  -->

                                <div *ngIf="active_trip_tab == 1" class="mt-4">
                                    <!-- formLeft col-lg-12 col-sm-12 col-md-12 col-xs-12 mt-4  -->
                                    <div class="row col-md-12 mt-4 mb-3 mx-2 td-section">
                                        <div class="col-auto pl-0 mr-auto">
                                            <div class="col-auto mb-2" [hidden]="!(is_schedule!='1')">
                                                <label class="l1"> Date/Time of Request Sent </label><br>
                                                <label class="l2" data-key="payment_date">{{payment_date |date:'MM/dd/yyyy HH:mm a'}}
                                                    {{(payment_date!=' - ') ? '('+tzName+')' : ''}}</label><br>
                                            </div>
                                            <div [hidden]="!(is_schedule=='1')" class="col-auto mb-2">
                                                <label class="l1">Date/Time of Request Accepted</label><br>
                                                <label class="l2" data-key="schedule_calender_accept_time">{{schedule_calender_accept_time
                                                    |date:'MM/dd/yyyy HH:mm a'}}
                                                    {{(schedule_calender_accept_time) ? '('+tzName+')' : ''}}
                                                </label><br>
                                            </div>
                                            <div class="col-auto mb-2">
                                                <label class="l1">Date/Time of Pickup </label><br>
                                                <label class="l2" data-key="pickup_time_raw">{{pickup_time_raw |date:'MM/dd/yyyy HH:mm a'}}
                                                    {{(pickup_time_raw) ? '('+tzName+')' : ''}}
                                                </label>
                                                <br>
                                            </div>
                                        </div>
                                        <div class="col-auto">
                                            <img src="{{user_image}}" *ngIf="user_image!=''"
                                            style="border-radius:50%;" class="center-block image" />
                                        <img src="http://qudos-s3.s3.amazonaws.com/user_profile/user.png"
                                            *ngIf="user_image==''"
                                            style="border-radius:50%; "
                                            class="center-block image dummy" />
                                        </div>
                                        <div class="col-auto mb-1">
                                            <label class="l1">Pickup Location</label><br>
                                            <label class="l2">{{pickup_location_address}}
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <hr>

                                    <div class="col-auto my-3 mx-2" [hidden]="!requestLoader" *ngIf="(driverNames=='')">
                                        <label class="l1">LOADING..
                                            <i class="fa fa-spinner fa-spin" style="font-size:130%"></i>
                                        </label><br>
                                    </div>
                                    
                                    <ng-container *ngIf="(driverNames!='')">
                                        <div class="my-3 mx-2">
                                            <div class="col-auto mb-2">
                                                <label class="l1">1st Request Sent to: </label><br>
                                                <label class="l2" *ngIf="driver1!=''" [innerHTML]="driver1"></label>
                                                
                                                <label class="l2" *ngIf="(driver1=='')">No Drivers Available in Range</label>
                                                <br>
                                            </div>
                                            <div [hidden]="!(driverrec2 == 1)"
                                                class="col-auto mb-2">
                                                <label class="l1">2nd Request Sent to:</label><br>
                                                <label class="l2" *ngIf="driver2!=''" ng-bind-html="driver2"></label>
                                                <label class="l2" *ngIf="(driver2=='')">No Drivers Available in Range</label>
                                                <br>
                                            </div>
                                            <div [hidden]="!(driverrec3 == 1)"
                                                class="col-auto mb-2">
                                                <label class="l1">3rd Request Sent to:</label><br>
                                                <label class="l2" *ngIf="driver3!=''" ng-bind-html="driver3"></label>
                                                <label class="l2" *ngIf="(driver3=='')">No Drivers Available in Range</label>
                                                <br>
                                            </div>
                                        </div>
                                        <hr>
                                        <div class="col-auto mb-2 my-3 mx-2">
                                            <label class="l1">Accepted By:</label> <br>
                                            <label class="l2">{{driver_name}}
                                                {{driver_mobile}}</label>
                                                <br>
                                        </div>
                                    </ng-container>
                                </div>

                                <!--  -->

                                <!-- <mat-content>
                                    <mat-tab-group dynamicHeight md-border-bottom>
                                        <mat-tab label="Trip Details">
                                            <md-content class="md-padding">
                                                


                                            </md-content>
                                        </mat-tab>



                                        <mat-tab label="Request Sent" [hidden]="!(is_schedule!='1')">
                                            <md-content class="md-padding">
                                                
                                            </md-content>
                                        </mat-tab>

                                    </mat-tab-group>
                                </mat-content> -->
                            </div>
                        </div>
                    <!-- </div> -->

                </div>
            </div>
            <!--Left Expandable Bar Ends Here-->


            <!--Right Expandable Starts Ends Here-->


            <!-- col-lg-6 col-xl-7 -->
            <!-- col -->
            <div class="col-6 rightSideBar card-shadow" id="mapCustom" [hidden]="!MapShow">
                <div class="page-nopad map-control row pt-1">
                    <!-- <div class="paging-area col-xl-5 col-md-5" style="padding:5px">
                        <span class="number-page">{{availableFrom}} - {{availableTo}} of {{countAvailableCars}}</span>
                        <button href="javascript:;" [ngClass]="{disabled:hidePrevsAV==1}" [disabled]="hidePrevsAV"
                            class="paging-link" (click)="pageChanged(1,'availableDrivers')">| <i
                                class="fa fa-angle-left" aria-hidden="true"></i></button>
                        <button href="javascript:;" [ngClass]="{disabled:hidePrevsAV==1}" [disabled]="hidePrevsAV"
                            class="paging-link" (click)="pageChanged(availableCurrentPage-1,'availableDrivers')"><i
                                class="fa fa-angle-left" aria-hidden="true"></i>
                        </button>
                        <button href="javascript:;" [ngClass]="{disabled:hideNextAV==1}" [disabled]="hideNextAV"
                            (click)="pageChanged(availableCurrentPage+1,'availableDrivers')" class="paging-link"><i
                                class="fa fa-angle-right" aria-hidden="true"></i>
                        </button>
                        <button href="javascript:;" [ngClass]="{disabled:hideNextAV==1}" [disabled]="hideNextAV"
                            class="paging-link" (click)="pageChanged(availableCarsPages,'availableDrivers')"><i
                                class="fa fa-angle-right" aria-hidden="true"></i>
                            |</button>
                    </div> -->
                    <div class="col" style="padding:5px">
                        <div class="row map-input-container card-shadow">
                            <div class="col-auto left-icon p-1 pl-3">
                                <img src="assets/images/drop_location.svg" alt="location_icon">
                                &nbsp;
                                <img src="assets/images/divider_black.svg" alt="divider_black">
                            </div>
                            <div class="col p-1"> <input type="text" style="padding-top:5px;padding-bottom:5px" id="searchLocation" name="search"
                                class="borderless-input autocomplete" placeholder="Search Location"
                                [(ngModel)]="searchLocation" /> </div>
                            <div class="col-auto right-icon pt-2">
                                <i class="fa fa-search"></i>
                            </div>
                        </div>

                    </div>
                    <div class="col" style="padding:5px">
                        <div class="row map-input-container card-shadow">
                            <div class="col-auto left-icon p-1 pl-3">
                                <img src="assets/images/prefer_fav.svg" alt="prefer_fav_icon">
                                &nbsp;
                                <img src="assets/images/divider_black.svg" alt="divider_black">
                            </div>
                            <div class="col p-1"> 
                                <input type="text" id="searchDriver" style="padding-top:5px;padding-bottom:5px" name="search"
                                class="borderless-input" placeholder="Search Driver" [(ngModel)]="searchDriver"
                                [ngModelOptions]="{ debounce: 400 }" (change)="searchD()" /> </div>
                            <div class="col-auto right-icon pt-2">
                                <i class="fa fa-search"></i>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-1 switch" (click)="enableDrivers()"
                        style="padding:5px">
                        <input name="driver" type="checkbox" id="toggleSwitch" [(ngModel)]="driverEnable"
                            (click)="enableDrivers()" (change)="enableDrivers()" value="hidePlate" />
                        <span class="slider round"></span>
                    </div>
                </div>

                <div style="border-radius: 5px;" id="map" class="map-b"></div>

            </div>
            <!--Map Div Ends Here-->



            <!-- col-lg-8 col-xl-7 -->
            <div class="right-side-bar animate-show col-6 carshow card-shadow p-0 pb-4 car-container" *ngIf="!MapShow">

                <div class="tab-panel" style="margin: 0 auto;position: -webkit-sticky; position: sticky; top: 0px;background-color: white;z-index: 2;">
                    <div class="row">
                        <div class="ml-4 px-0 col-auto cursor-pointer" (click)="showDirection(1)">
                            Ride Direction
                        </div>
                        <div class="px-0 col-auto cursor-pointer" (click)="(!force) ? showCar() : donothing()" [class.active-tab]="CarShow">
                            Ride Type
                        </div>

                        <div class="px-0 col-auto cursor-pointer mr-auto" [class.active-tab]="UserShow" (click)="showUser()">
                            QudosFave Drivers
                        </div>

                        <div class="col-auto px-2">
                            <img src="assets/images/divider_black.svg" alt="divider">
                            &nbsp;&nbsp;&nbsp;

                            <ng-container *ngIf="CarShow">
                                
                                    <!-- <a href="javascript:;" [hidden]="!DirectionShow" (click)="getFareEstimate()"
                                class="bookRideButton pull-right animate-show greyShadow hidden">New Ride Request</a> -->

                                <!-- <span style="color: #1F8DC6;cursor:pointer" *ngIf="DirectionShow" (click)="getFareEstimate()">
                                    New Ride Request
                                </span> -->


                                <!-- <a href="javascript:;" [hidden]="!CarShow" (click)="showDirection(1)"
                                    class="bookRideButton pull-right animate-show greyShadow greyBtn">Back</a> -->

                                <span style="color: #1F8DC6;cursor:pointer" (click)="showDirection(1)">
                                    <i class="fa fa-angle-left"></i> &nbsp;
                                    Back
                                </span>

                                <!-- <a href="javascript:;" [hidden]="!CarShow" *ngIf="booking.car_selected ==1"
                                    [ngClass]="{greyBtn : (booking.car_selected !=1)}" (click)="selectCarClassNext()"
                                    class="bookRideButton pull-right animate-show greyShadow hidden">Next</a> -->

                                <!-- <span style="color: #1F8DC6;cursor:pointer" *ngIf="booking.car_selected == 1" (click)="selectCarClassNext()">
                                    Next
                                </span> -->

                            </ng-container>

                            <ng-container *ngIf="UserShow">

                                <!-- <a href="javascript:;" [hidden]="!DirectionShow" (click)="getFareEstimate()"
                                class="bookRideButton pull-right animate-show greyShadow hidden">New Ride Request</a> -->

                                <!-- <span style="color: #1F8DC6;cursor:pointer" *ngIf="DirectionShow" (click)="getFareEstimate()">
                                    New Ride Request
                                </span> -->
        
                                <!-- <a href="javascript:;" [hidden]="!UserShow" (click)="showCar()"
                                    class="bookRideButton pull-right animate-show greyShadow greyBtn">Back</a> -->
                                <span style="color: #1F8DC6;cursor:pointer" (click)="showCar()">
                                    <i class="fa fa-angle-left"></i> &nbsp;
                                    Back
                                </span>
                                

        
                                <!-- <a href="javascript:;" [hidden]="!UserShow" *ngIf="booking.driver_selected ==1"
                                    [ngClass]="{greyBtn : (booking.driver_selected !=1)}" (click)="slectNext()"
                                    class="bookRideButton pull-right animate-show greyShadow hidden">Next</a> -->

                                <!-- <span style="color: #1F8DC6;cursor:pointer" *ngIf="booking.driver_selected == 1" (click)="slectNext()">
                                    Next
                                </span> -->

                            </ng-container>

                        </div>
                    </div>
                </div>

                <div *ngIf="CarShow" class="pt-2 ride-type">
                    <div *ngFor="let car of cars_option;let i = index">
                        <div class="row card-shadow ride-row m-4 p-2">
                            <div class="col-3 p-0 my-auto">
                                <img class="img-fluid m-0" [src]="car.car_image" alt="car_image">
                            </div>
                            <div class="col">
                                <div class="my-3">
                                    <div class="car-title"> <!-- {{car.carClass}}: --> {{car.car_name}} </div> 
                                    <div class="ride-feature mt-2">
                                        Free 30 mins wait time for airport pickups, 5 mins for all others 
                                        <br><br>
                                        Includes meet and greet
                                        <br><br>
                                        Free Cancellation up to 6 hour before pickup
                                    </div>
                                </div>
                                    
                            </div>
                            <div class="col-3 my-auto mr-1 text-center">
                                <div class="row justify-content-md-center my-2 ride-cost">${{car.value_regular | number}}</div>

                                <div class="row justify-content-md-center my-2">
                                    <button class="ride-select-button btn btn-primary" (click)="selectCarClass(car.car_type,car.value_regular,car.value_scheduled)" *ngIf="booking.car_type == car.car_type">
                                        <span class="selected"> <img style="padding: 6px" src="assets/images/correct_icon.svg"> </span> Selected
                                    </button>

                                    <button class="ride-select-button btn btn-primary" (click)="selectCarClass(car.car_type,car.value_regular,car.value_scheduled)" *ngIf="booking.car_type != car.car_type">
                                        Select
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div *ngIf="UserShow" class="pt-2" style="position: relative;">

                    <div class="tab-panel" style="margin: 0 auto;position: -webkit-sticky; position: sticky; top: 0px;background-color: white;z-index: 3;">
                        <div class="row">
                            <div class="ml-4 px-0 col-auto cursor-pointer" (click)="switchMode('m')" [class.active-tab]="myQudosMode==1">
                                <!-- My QudosFave™ -->
                                My QudosFave
                            </div>
                            <div class="px-0 col-auto cursor-pointer" (click)="switchMode('u')" [class.active-tab]="UserQudosMode==1">
                                <!-- User QudosFave™ -->
                                Client's Qudos Fave
                            </div>
    
                            <div class="px-0 col-auto cursor-pointer mr-auto" [class.active-tab]="AllQudosMode == 1" (click)="switchMode('a')">
                                Explore
                            </div>
    
                            <div class="col-auto px-0">
                                <div class="d-flex">
                                    <div class="mr-3" style="margin-top: -6px;"><img src="assets/images/divider_black.svg" alt="divider"></div>
                                    <div> <i class="fa fa-search"></i> &nbsp;&nbsp;  </div>
                                    <div> 
                                        <input type="text" placeholder="Type to Search" [hidden]="!myQudosMode"
                                            [ngModelOptions]="{ debounce: 200 }" class="borderless-input grey-placeholder"
                                            [(ngModel)]="searchmyuser" />

                                        <input type="text" placeholder="Type to Search" [hidden]="!UserQudosMode"
                                            [ngModelOptions]="{ debounce: 200 }" class="borderless-input grey-placeholder"
                                            [(ngModel)]="searchlistuser" />

                                        <input type="text" placeholder="Type to Search" [hidden]="!AllQudosMode"
                                            [ngModelOptions]="{ debounce: 200 }" class="borderless-input grey-placeholder"
                                            [(ngModel)]="searchalluser" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!-- myQudosMode -->
                    <div class="col-lg-12 col-xl-11 card-outline-secondary my-4" style="margin: 0 auto;"
                        [hidden]="!myQudosMode">
                        <div class="col-md-12 text-center " [hidden]="corporateFavDriver.length!=0">
                            <h3 style="font-family: poppins;font-size: 1.640625rem;font-weight:400;color:#828282">No Driver Found</h3>
                        </div>
                        <div class="row driverarea">
                            <div class="col-md-4 p-1 user-card-div"  *ngFor="let carToSelect of cars_option; let i=index"
                                [hidden]="booking.car_type != carToSelect.car_type">

                                <div class="row fav-driver-card card-shadow col-md-12" [class.active]="booking.select_car_type == carToSelect.car_type">
                                    <div class="col-auto my-auto pr-0">
                                        <img class="img-fluid m-0 card-img" [src]="carToSelect.car_image" /> 
                                    </div>
                                    <div class="col">
                                        <div class="card-title"> {{carToSelect.car_name}} </div>
                                        <div class="card-description"> {{carToSelect.similar}} </div>

                                        <div class="mt-2">

                                            <button class="driver-select-button btn btn-primary" 
                                            (click)="slect(carToSelect.car_type,1)" 
                                            *ngIf="booking.select_car_type == carToSelect.car_type">
                                                <span class="selected"> <img style="padding: 1px" src="assets/images/correct_icon.svg"> </span> 
                                                Selected
                                            </button>
        
                                            <button class="driver-select-button btn btn-primary" 
                                            (click)="slect(carToSelect.car_type,1)" 
                                            *ngIf="booking.select_car_type != carToSelect.car_type">
                                                Select
                                            </button>

                                        </div>

                                    </div>
                                </div>
                            </div>

                            <div class="col-md-4 p-1 user-card-div" style="padding:5px" *ngFor="let driver of corporateFavDriver | ListFilter: 'driver_name': searchmyuser; let i=index" [hidden]="corporateFavDriver.length < 0">
                                
                                <div class="row fav-driver-card card-shadow col-md-12" [ngClass]="{unverified : driver.all_docs_verified != 1, active: booking.driver_id == driver.driver_id }">
                                    <div class="col-auto my-auto pr-0">
                                        <img class="img-fluid m-0 card-img" [src]="driver.driver_image" />
                                    </div>
                                    <div class="col">
                                        <div class="card-title"> {{driver.driver_name}} </div>
                                        <div class="card-description"> {{driver.car_make}} {{driver.car_model}} <br>
                                            {{driver.car_year}} {{driver.car_color}} </div>

                                        <div class="mt-2">
                                              <ng-container *ngIf="driver.all_docs_verified == 1">

                                                <button class="driver-select-button btn btn-primary"
                                                *ngIf="booking.driver_id == driver.driver_id">
                                                    <span class="selected"> <img style="padding: 2px" src="assets/images/correct_icon.svg"> </span> 
                                                    Selected
                                                </button>
            
                                                <button class="driver-select-button btn btn-primary" 
                                                (click)="slect(driver.driver_id)" 
                                                *ngIf="booking.driver_id != driver.driver_id">
                                                    Select
                                                </button>

                                            </ng-container>

                                            <ng-container *ngIf="driver.all_docs_verified == 0">
                                                <button class="driver-select-button btn btn-primary" 
                                                *ngIf="booking.driver_id != driver.driver_id">
                                                    Select
                                                </button>
                                            </ng-container>

                                        </div>

                                    </div>
                                </div>
                            </div>
                            
                        </div>
                    </div>

                    <!-- UserQudosMode -->
                    <div class=" col-lg-12 col-xl-11 card-outline-secondary my-4" style="margin: 0 auto;"
                        [hidden]="!UserQudosMode">
                        <div class="col-md-12 text-center" [hidden]="userFavDriver.length !=0">
                            <h3 style="font-family:poppins;font-size: 1.640625rem;font-weight:400;color:#828282">No Driver Found</h3>
                        </div>
                        <div class="row driverarea">
                            <div class="col-md-4 p-1 user-card-div" *ngFor="let carToSelect of cars_option; let i=index;"
                                [hidden]="booking.car_type != carToSelect.car_type">

                                <div class="row fav-driver-card card-shadow col-md-12" [class.active]="booking.select_car_type == carToSelect.car_type">
                                    <div class="col-auto my-auto pr-0">
                                        <img class="img-fluid m-0 card-img" [src]="carToSelect.car_image" />
                                    </div>

                                    <div class="col">
                                        <div class="card-title"> {{carToSelect.car_name}} </div>
                                        <div class="card-description"> {{carToSelect.similar}} </div>
    
                                        <div class="mt-2">

                                            <button class="driver-select-button btn btn-primary"
                                                [hidden]="booking.select_car_type != carToSelect.car_type"
                                                (click)="slect(carToSelect.car_type,1)">
                                                <span class="selected"> <img style="padding: 3px" src="assets/images/correct_icon.svg"> </span> 
                                                Selected
                                            </button>

                                            <button class="driver-select-button btn btn-primary"
                                                [hidden]="booking.select_car_type == carToSelect.car_type"
                                                (click)="slect(carToSelect.car_type,1)">
                                                Select
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
    
                            
                            <div class="col-md-4 p-1 user-card-div" style="padding:5px" [hidden]="userFavDriver.length <= 0"
                                *ngFor="let userDriver of userFavDriver | ListFilter: 'driver_name': searchlistuser; let i=index;">

                                <div class="row fav-driver-card card-shadow col-md-12"  [ngClass]="{unverified: userDriver.all_docs_verified == 0, active: booking.driver_id == userDriver.driver_id }">
                                    <div [hidden]="!userDriver.driver_image" class="col-auto my-auto pr-0">
                                        <img class="img-fluid m-0 card-img" src="{{userDriver.driver_image}}" />

                                    </div>
                                    <div class="col">
                                        <div class="card-title">{{userDriver.driver_name}}</div>
                                        <div class="card-description">{{userDriver.car_make}} {{userDriver.car_model}} <br>
                                        {{userDriver.car_year}} {{userDriver.car_color}} </div>

                                        <div class="mt-2">

                                            <div [hidden]="(userDriver.all_docs_verified !== 1)">
                                                <button class="driver-select-button btn btn-primary"
                                                    [hidden]="booking.driver_id !== userDriver.driver_id"
                                                    (click)="slect(userDriver.driver_id)">
                                                    <span class="selected"> <img style="padding: 2px" src="assets/images/correct_icon.svg"> </span> 
                                                    Selected</button>

                                                <button class="driver-select-button btn btn-primary"
                                                    [hidden]="booking.driver_id == userDriver.driver_id"
                                                    (click)="slect(userDriver.driver_id)">Select</button>
                                            </div>

                                            <div [hidden]="(userDriver.all_docs_verified !== 0)">
                                                <button class="driver-select-button btn btn-primary"
                                                    [hidden]="booking.driver_id == userDriver.driver_id">Select</button>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!-- AllQudosMode -->
                    <div class="col-lg-12 col-xl-11 card-outline-secondary my-4" style="margin: 0 auto;"
                        [hidden]="!AllQudosMode">
                        <div class="col-md-12 text-center" [hidden]="all_drivers.length!==0">
                            <h3 style="font-family:poppins; color:#828282;font-size: 1.640625rem;font-weight:400;color:#212529">No Driver Found</h3>
                        </div>

                        <div class="row  driverarea">    
                            <div class="col-md-4 p-1 user-card-div" *ngFor="let carToSelect of cars_option; let i=index;"
                                [hidden]="booking.car_type != carToSelect.car_type">

                                <div class="row fav-driver-card card-shadow col-md-12" [class.active]="booking.select_car_type == carToSelect.car_type">
                                    <div class="col-auto my-auto pr-0">
                                        <img class="img-fluid m-0 card-img" [src]="carToSelect.car_image" />
                                    </div>
                                    <div class="col">
                                        <div class="card-title"> {{carToSelect.car_name}} </div>
                                        <div class="card-description"> {{carToSelect.similar}} </div>
        
                                        <div class="mt-2">
                                            <button class="driver-select-button btn btn-primary"
                                                [hidden]="booking.select_car_type != carToSelect.car_type">
                                                <span class="selected"> <img style="padding: 3px" src="assets/images/correct_icon.svg"> </span> 
                                                Selected
                                            </button>

                                            <button class="driver-select-button btn btn-primary"
                                                [hidden]="booking.select_car_type == carToSelect.car_type"
                                                (click)="slect(carToSelect.car_type,1)">
                                                Select
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-4 p-1 user-card-div" style="padding:5px" [hidden]="!(all_drivers.length>0)"
                                *ngFor="let driver of all_drivers | ListFilter:  'driver_name': searchalluser">

                                <div class="row fav-driver-card card-shadow col-md-12" [ngClass]="{unverified: driver.all_docs_verified == 0, active: booking.driver_id == driver.driver_id }">

                                    <div [hidden]="!driver.driver_image" class="col-auto my-auto pr-0">
                                        <img class="img-fluid m-0 card-img" [src]="driver.driver_image" />
                                    </div>
                                    <div class="col">
                                        <div class="card-title"> 
                                            <span *ngIf="driver.driver_name.length > 10">{{driver.driver_name | slice : 0 : 12}}...</span> 
                                            <span *ngIf="driver.driver_name.length <= 10"> {{ driver.driver_name }}</span> 
                                        </div>
                                        <div class="card-description"> {{driver.car_make}} {{driver.car_model}} <br>
                                            {{driver.car_year}} {{driver.car_color}} </div>
    
                                        <div class="mt-2">
                                            <div [hidden]="(driver.all_docs_verified != 1)">
                                                <button class="driver-select-button btn btn-primary"
                                                    [hidden]="booking.driver_id != driver.driver_id"
                                                    (click)="slect(driver.driver_id)">
                                                    <span class="selected"> <img style="padding: 2px" src="assets/images/correct_icon.svg"> </span> 
                                                    Selected
                                                </button>

                                                <button class="driver-select-button btn btn-primary" [hidden]="booking.driver_id == driver.driver_id"
                                                    (click)="slect(driver.driver_id)">Select</button>
                                            </div>
                                            <div [hidden]="(driver.all_docs_verified != 0)">
                                            <button class="driver-select-button btn btn-primary"
                                                [hidden]="booking.driver_id == driver.driver_id">Select</button>
                                            </div>
                                        </div>
                                    </div>
                                        
                                </div>
                            </div>
    
                        </div>
                    </div>

                </div>


                 <!-- <div class="row col-lg-12 col-xl-11 " style="margin: 0 auto;align-items:center">
                    <div class="col-md-3 text-left booking-step pl-4">
                        <a href="javascript:;" (click)="showDirection(1)" [ngClass]="{inactive : DirectionShow == 0 }"
                            class="callToAction">Direction</a>
                    </div>
                    <div class="col-md-3 text-center booking-step">
                        <a href="javascript:;" (click)="(!force) ? showCar() : donothing()"
                            [ngClass]="{inactive : CarShow == 0 }" class="callToAction">Car Class</a>
                    </div>
                    <div class="col-md-3 text-center booking-step no-after">
                        <a href="javascript:;" (click)="showUser() " [ngClass]="{inactive : UserShow == 0 }"
                            class="callToAction">QudosFave™</a>
                    </div>
                    <div class="col-md-3 text-center ">
                        <a href="javascript:;" [hidden]="!DirectionShow" (click)="getFareEstimate()"
                            class="bookRideButton pull-right animate-show greyShadow hidden">New Ride Request</a>


                        <a href="javascript:;" [hidden]="!CarShow" (click)="showDirection(1)"
                            class="bookRideButton pull-right animate-show greyShadow greyBtn">Back</a>

                        <a href="javascript:;" [hidden]="!CarShow" *ngIf="booking.car_selected ==1"
                            [ngClass]="{greyBtn : (booking.car_selected !=1)}" (click)="selectCarClassNext()"
                            class="bookRideButton pull-right animate-show greyShadow hidden">Next</a>

                        <a href="javascript:;" [hidden]="!UserShow" (click)="showCar()"
                            class="bookRideButton pull-right animate-show greyShadow greyBtn">Back</a>

                        <a href="javascript:;" [hidden]="!UserShow" *ngIf="booking.driver_selected ==1"
                            [ngClass]="{greyBtn : (booking.driver_selected !=1)}" (click)="slectNext()"
                            class="bookRideButton pull-right animate-show greyShadow hidden">Next</a>
                    </div>
                </div> -->

                <!-- <div class="col-lg-12 col-xl-11 " style="margin: 0 auto;">
                    <div *ngFor="let car of cars_option;let i=index;" [ngClass]="(i==0) ? 'mt-4':'mt-60'"
                        class="col-md-12 car-card">
                        <h3 class="car-heading">{{car.carClass}}: {{car.car_name}}</h3>
                        <span class="car-info">{{car.similar}}</span>
                        <span class="car-cancarry"><i class="fa fa-users"></i> <span>Max {{car.max}}</span> | <i
                                class="fa fa-suitcase"></i> <span>Max {{car.luggage}}</span></span>
                        <hr>
                        <div class=" row">

                            <div class="col-md-4">
                                <p class="car-features">
                                    <span><i class="fa far fa-clock"></i> Free 30 mins wait time for airport pickups, 5
                                        mins
                                        for all others</span>
                                    <span><i class="fa far fa-smile"></i> Includes meet and greet</span>
                                    <span><i class="fa far fa-times-circle"></i> Free Cancellation up to 6 hour before
                                        pickup </span>
                                </p>
                            </div>
                            <div class="col-md-5">
                                <img class="card-img-top img-fluid" src="{{car.car_image}}" alt="">
                            </div>

                            <div class="col-md-3 text-center car-price">
                                <h2 class="price-heading">${{car.value_regular | number}}</h2>
                                <h5 class="tax-info">All prices include tax, Fees & Tip</h5>

                                <button class="car-select-btn" [hidden]="!(booking.car_type != car.car_type)"
                                    (click)="selectCarClass(car.car_type,car.value_regular,car.value_scheduled)">Select</button>

                                <button class="car-select-btn selectedCar"
                                    [hidden]="!(booking.car_type == car.car_type)"
                                    (click)="selectCarClass(car.car_type,car.value_regular,car.value_scheduled)"><i
                                        class="fa fa-check"></i> Selected</button>

                            </div>
                        </div>
                    </div>
                </div> -->
            </div>

            
            <!-- <div class="row animate-show col-6 pt-4 carshow card-shadow pb-4" [hidden]="1">

                <div class="row col-lg-12 col-xl-11 bottom-20" style="margin: 0 auto;">
                    <div class="col-md-3 text-left booking-step pl-4">
                        <a href="javascript:;" (click)="showDirection(1)" [ngClass]="{inactive : DirectionShow == 0 }"
                            class="callToAction">Direction</a>
                    </div>
                    <div class="col-md-3 text-center booking-step">
                        <a href="javascript:;" (click)="(!force) ? showCar() : donothing()"
                            [ngClass]="{inactive : CarShow == 0 }" class="callToAction">Car Class</a>
                    </div>
                    <div class="col-md-3 text-center booking-step no-after">
                        <a href="javascript:;" (click)="showUser()" [ngClass]="{inactive : UserShow == 0 }"
                            class="callToAction">QudosFave™</a>
                    </div>
                    <div class="col-md-3 text-center ">
                        <a href="javascript:;" [hidden]="!DirectionShow" (click)="getFareEstimate()"
                            class="bookRideButton pull-right animate-show greyShadow hidden">New Ride Request</a>


                        <a href="javascript:;" [hidden]="!CarShow" (click)="showDirection(1)"
                            class="bookRideButton pull-right animate-show greyShadow greyBtn">Back</a>

                        <a href="javascript:;" [hidden]="!CarShow" *ngIf="booking.car_selected ==1"
                            [ngClass]="{greyBtn : (booking.car_selected !=1)}" (click)="selectCarClassNext()"
                            class="bookRideButton pull-right animate-show greyShadow hidden">Next</a>

                        <a href="javascript:;" [hidden]="!UserShow" (click)="showCar()"
                            class="bookRideButton pull-right animate-show greyShadow greyBtn">Back</a>

                        <a href="javascript:;" [hidden]="!UserShow" *ngIf="booking.driver_selected ==1"
                            [ngClass]="{greyBtn : (booking.driver_selected !=1)}" (click)="slectNext()"
                            class="bookRideButton pull-right animate-show greyShadow hidden">Next</a>
                    </div>
                </div>


                <div class="col-lg-12 col-xl-11 card-outline-secondary my-4" style="margin: 0 auto;">

                    <a class="btn btn-outline-primary btn-md tripsbtn ipad-btn " (click)="switchMode('m')"
                        style="float:left; margin-right:10px;" [ngClass]="{'active-page':(myQudosMode==1)}"
                        id="drivertripsbtnicon">My QudosFave™</a>

                    <a class="btn btn-outline-primary btn-md tripsbtn ipad-btn" (click)="switchMode('u')"
                        style="float:left; margin-right:10px;" [ngClass]="{'active-page':(UserQudosMode==1)}">User
                        QudosFave™</a>

                    <a class="btn btn-outline-primary btn-md tripsbtn ipad-btn" (click)="switchMode('a')"
                        style="float:left;" [ngClass]="{'active-page':(AllQudosMode==1)}">QudosFave™ list</a>

                    <div class="col-md-6 inputserch">
                        <span class="search-icon serchfield-icon srch_icon"><i class="fa fa-search"></i></span>
                        <input type="text" placeholder="Search name, car, affiliate" [hidden]="!myQudosMode"
                            [ngModelOptions]="{ debounce: 200 }" class="input form-control field search-ng serchfield"
                            [(ngModel)]="searchmyuser" />
                        <input type="text" placeholder="Search name, car, affiliate" [hidden]="!UserQudosMode"
                            [ngModelOptions]="{ debounce: 200 }" class="input form-control field search-ng serchfield"
                            [(ngModel)]="searchlistuser" />
                        <input type="text" placeholder="Search name, car, affiliate" [hidden]="!AllQudosMode"
                            [ngModelOptions]="{ debounce: 200 }" class="input form-control field search-ng serchfield"
                            [(ngModel)]="searchalluser" />
                    </div>
                </div>

                <div class="col-lg-12 col-xl-11 card-outline-secondary my-4" style="margin: 0 auto;"
                    [hidden]="!myQudosMode">
                    <div class="col-md-12 text-center " [hidden]="corporateFavDriver.length!=0">
                        <h3 style="font-size: 1.640625rem;font-weight:400;color:#212529">No Driver Found</h3>
                    </div>
                    <div class="row col-md-12 driverarea">
                        
                        <div class="col-md-4 user-card-div " *ngFor="let carToSelect of cars_option; let i=index"
                            [ngClass]="{'hidden' : booking.car_type != carToSelect.car_type}">
                            <div class="row user-card col-md-12">
                                <div class="col-md-5 d-image">
                                    <img class="circle-img" src="{{carToSelect.car_image}}" />
                                </div>
                                <div class="col-md-7">
                                    <h5>{{carToSelect.car_name}}, Select</h5>
                                    <span class="driver-car select-car-option">{{carToSelect.similar}} </span>
                                </div>

                                <div class="col-md-12 text-right">
                                    <div>
                                        <button class="car-select-btn"
                                            [hidden]="booking.select_car_type == carToSelect.car_type"
                                            (click)="slect(carToSelect.car_type,1)">Select</button>
                                        <button class="car-select-btn selectedCar"
                                            [hidden]="booking.select_car_type != carToSelect.car_type"
                                            (click)="slect(carToSelect.car_type,1)"><i class="fa fa-check"></i>
                                            Selected</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4 user-card-div" [hidden]="corporateFavDriver.length<0"
                            *ngFor="let driver of corporateFavDriver let i=index;">
                            <div class="row user-card col-md-12"
                                [ngClass]="{'unverified' : driver.all_docs_verified != 1}">
                                <div [hidden]="!driver.driver_image" class="col-md-5">
                                    <img class="img img-responsive" src="{{driver.driver_image}}" />
                                </div>
                                <div class="col-md-7">
                                    <h5 class="name_wraping">{{driver.driver_name}}</h5>
                                    <span class="driver-car">{{driver.car_make}} {{driver.car_model}} <br>
                                        {{driver.car_year}} {{driver.car_color}} </span>
                                </div>

                                <div class="col-md-12 text-right">
                                    <div [hidden]="!(driver.all_docs_verified == 1)">
                                        <button class="car-select-btn" [hidden]="booking.driver_id == driver.driver_id"
                                            (click)="slect(driver.driver_id)">Select</button>
                                        <button class="car-select-btn selectedCar"
                                            [hidden]="booking.driver_id != driver.driver_id"><i class="fa fa-check"></i>
                                            Selected</button>
                                    </div>

                                    <div [hidden]="(driver.all_docs_verified != 0)">
                                        <button class="car-select-btn not-verified"
                                            [hidden]="booking.driver_id == driver.driver_id">Select</button>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class=" col-lg-12 col-xl-11 card-outline-secondary my-4" style="margin: 0 auto;"
                    [hidden]="!UserQudosMode">
                    <div class="col-md-12 text-center" [hidden]="userFavDriver.length !=0">
                        <h3 style="font-size: 1.640625rem;font-weight:400;color:#212529">No Driver Found</h3>
                    </div>
                    <div class="row col-md-12 driverarea">

                        
                        <div class="col-md-4 user-card-div " *ngFor="let carToSelect of cars_option; let i=index;"
                            [ngClass]="{'hidden' : booking.car_type != carToSelect.car_type}">
                            <div class="row user-card col-md-12">
                                <div class="col-md-5 d-image">
                                    <img class="circle-img" src="{{carToSelect.car_image}}" />
                                </div>
                                <div class="col-md-7">
                                    <h5>{{carToSelect.car_name}}, Select</h5>
                                    <span class="driver-car select-car-option">{{carToSelect.similar}} </span>
                                </div>

                                <div class="col-md-12 text-right">
                                    <div>
                                        <button class="car-select-btn"
                                            [hidden]="booking.select_car_type == carToSelect.car_type"
                                            (click)="slect(carToSelect.car_type,1)">Select</button>
                                        <button class="car-select-btn selectedCar"
                                            [hidden]="booking.select_car_type != carToSelect.car_type"
                                            (click)="slect(carToSelect.car_type,1)"><i class="fa fa-check"></i>
                                            Selected</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        
                        <div class="col-md-4 user-card-div" [hidden]="userFavDriver.length <= 0"
                            *ngFor="let userDriver of userFavDriver; let i=index;">
                            <div class="row user-card col-md-12"
                                [ngClass]="{unverified : (userDriver.all_docs_verified == 0)}">
                                <div [hidden]="!userDriver.driver_image" class="col-md-5">
                                    <img class="img img-responsive" src="{{userDriver.driver_image}}" />
                                </div>
                                <div class="col-md-7">
                                    <h5 class="name_wraping">{{userDriver.driver_name}}</h5>
                                    <span class="driver-car">{{userDriver.car_make}} {{userDriver.car_model}} <br>
                                        {{userDriver.car_year}} {{userDriver.car_color}} </span>
                                </div>

                                <div class="col-md-12 text-right">
                                    <div [hidden]="(userDriver.all_docs_verified !== 1)">
                                        <button class="car-select-btn"
                                            [hidden]="booking.driver_id == userDriver.driver_id"
                                            (click)="slect(userDriver.driver_id)">Select</button>
                                        <button class="car-select-btn selectedCar"
                                            [hidden]="booking.driver_id !== userDriver.driver_id"
                                            (click)="slect(userDriver.driver_id)"><i class="fa fa-check"></i>
                                            Selected</button>
                                    </div>
                                    <div [hidden]="(userDriver.all_docs_verified !== 0)">
                                        <button class="car-select-btn not-verified"
                                            [hidden]="booking.driver_id == userDriver.driver_id">Select</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class=" col-lg-12 col-xl-11 card-outline-secondary my-4" style="margin: 0 auto;"
                    [hidden]="!AllQudosMode">
                    <div class="col-md-12 text-center" [hidden]="all_drivers.length!==0">
                        <h3 style="font-size: 1.640625rem;font-weight:400;color:#212529">No Driver Found</h3>
                    </div>
                    <div class="row col-md-12 driverarea">

                        
                        <div class="col-md-4 user-card-div " *ngFor="let carToSelect of cars_option; let i=index;"
                            [ngClass]="{'hidden' : booking.car_type != carToSelect.car_type}">
                            <div class="row user-card col-md-12">
                                <div class="col-md-5 d-image">
                                    <img class="circle-img" src="{{carToSelect.car_image}}" />
                                </div>
                                <div class="col-md-7">
                                    <h5>{{carToSelect.car_name}}, Select</h5>
                                    <span class="driver-car select-car-option">{{carToSelect.similar}} </span>
                                </div>

                                <div class="col-md-12 text-right">
                                    <div>
                                        <button class="car-select-btn"
                                            [hidden]="booking.select_car_type == carToSelect.car_type"
                                            (click)="slect(carToSelect.car_type,1)">Select</button>
                                        <button class="car-select-btn selectedCar"
                                            [hidden]="booking.select_car_type != carToSelect.car_type"><i
                                                class="fa fa-check"></i> Selected</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4 user-card-div" [hidden]="!(all_drivers.length>0)"
                            *ngFor="let driver of all_drivers; let i=index;">
                            <div class="row user-card col-md-12"
                                [ngClass]="{unverified : (driver.all_docs_verified == 0)}">
                                <div [hidden]="!driver.driver_image" class="col-md-5">
                                    <img class="img img-responsive" src="{{driver.driver_image}}" />
                                </div>
                                <div class="col-md-7">
                                    <h5 class="name_wraping">{{driver.driver_name}} </h5>
                                    <span class="driver-car">{{driver.car_make}} {{driver.car_model}} <br>
                                        {{driver.car_year}} {{driver.car_color}} </span>
                                </div>

                                <div class="col-md-12 text-right">
                                    <div [hidden]="(driver.all_docs_verified != 1)">
                                        <button class="car-select-btn" [hidden]="booking.driver_id == driver.driver_id"
                                            (click)="slect(driver.driver_id)">Select</button>
                                        <button class="car-select-btn selectedCar"
                                            [hidden]="booking.driver_id != driver.driver_id"
                                            (click)="slect(driver.driver_id)"><i class="fa fa-check"></i>
                                            Selected</button>
                                    </div>
                                    <div [hidden]="(driver.all_docs_verified != 0)">
                                        <button class="car-select-btn not-verified"
                                            [hidden]="booking.driver_id == driver.driver_id">Select</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                

            </div> -->
            
        </div>
    </div>

    <!-- Live Map Modal --->


    <div id="confirmRideCancel" class="modal" role="dialog" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog modal-dialog-auto modal-dialog-centered">
            <!-- Modal content-->
            <div class="modal-content shadow">

                <div class="mx-5 mt-4 mb-2 title" style="font-size: 24px">Cancel Ride?</div>

                <div class="modal-body p-0">
                    <hr class="confirm mb-0">
                    <!-- <button type="button" class="close" data-dismiss="modal"
                        style="margin-top:-4px;font-size: 1.7em;margin-right: 4px;">&times;</button>
                    <div style="text-align: center; margin-bottom:50px">
                        <p class="modal-title" style="margin-top: 40px;font-size: 18px; font-weight: 400;">
                            Are you sure you want to cancel the {{(is_schedule == '0')? 'Regular': 'Scheduled'}} ride?
                        </p>
                    </div>
                    <div style="text-align: center; margin-bottom: 25px;" class="logoutbtn">
                        <button class="btn btn-outline login_button button-blue mx-2" data-dismiss="modal" type="submit"
                            style="padding: 7px 33px 7px 33px; border:1px solid #aaa; text-shadow: none;">No</button>
                        <button class="btn btn-primary login_button button-black mx-2" data-dismiss="modal"
                            (click)="cancelRide(triptoCancel)" type="submit"
                            style="padding:7px 33px 7px 33px; margin-right:7px;">Yes</button>
                    </div> -->

                    <div class="message-bg">
                        <div class="message p-5">
                            Are you sure you want to cancel the {{(is_schedule == '0')? 'Regular': 'Scheduled'}} ride?
                        </div>
                    </div>
                    <hr class="confirm mt-0">

                    <div align="center" class="m-3 mb-4">
                        <button #rideCancelButton class="btn btn-primary btn-left m-2 px-4 py-1" data-dismiss="modal">
                            No
                        </button>
    
                        <button class="btn btn-secondary btn-right m-2 px-4 py-1" (click)="cancelRide(triptoCancel)" type="submit">
                            Yes
                        </button>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="reschedule" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">

        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="row ">
                    <div class="col-sm-12">
                        <button type="button" class="close" data-dismiss="modal"
                            style="font-size:32px;float:right;padding:5px;">&times;</button>
                        <h5 id="mtitle" style="text-align: center;">RESCHEDULE THE RIDE</h5>
                    </div>
                </div>
                <div class="modal-body schedule-screen ">

                    <div id="exTab3" class="container">
                        <div class="tab-content ">
                            <div class="tab-pane container active " id="1b">
                                <div [hidden]="!doc.successMsg" class="alert alert-success text-center">
                                    {{doc.successMsg}}
                                </div>
                                <div [hidden]="!doc.errorMsg" class="alert alert-danger text-center">{{doc.errorMsg}}
                                </div>
                                <div class="row modalrow">
                                    <div class="col-sm-12">
                                        <div class="row row-input">
                                            <div class="col-md-6">
                                                <label>Date</label>
                                                <div class="input-container">
                                                    <input type="text" [(ngModel)]="rebooking.date" class="form-control"
                                                        id="bookdate" data-format="DD-MM-YYYY"
                                                        data-template="DD MMM YYYY" name="date">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group row row-input">
                                                    <div class="col-md-6">
                                                        <label>Time (Hour)</label>
                                                        <select name="time" [(ngModel)]="rebooking.time_hour"
                                                            class="form-control" id="time">
                                                            <option value="00">00 (12 AM)</option>
                                                            <option value="01">01 (1 AM)</option>
                                                            <option value="02">02 (2 AM)</option>
                                                            <option value="03">03 (3 AM)</option>
                                                            <option value="04">04 (4 AM)</option>
                                                            <option value="05">05 (5 AM)</option>
                                                            <option value="06">06 (6 AM)</option>
                                                            <option value="07">07 (7 AM)</option>
                                                            <option value="08">08 (8 AM)</option>
                                                            <option value="09">09 (9 AM)</option>
                                                            <option value="10">10 (10 AM)</option>
                                                            <option value="11">11 (11 AM)</option>
                                                            <option value="12">12 (12 PM)</option>
                                                            <option value="13">13 (01 PM)</option>
                                                            <option value="14">14 (02 PM)</option>
                                                            <option value="15">15 (03 PM)</option>
                                                            <option value="16">16 (04 PM)</option>
                                                            <option value="17">17 (05 PM)</option>
                                                            <option value="18">18 (06 PM)</option>
                                                            <option value="19">19 (07 PM)</option>
                                                            <option value="20">20 (08 PM)</option>
                                                            <option value="21">21 (09 PM)</option>
                                                            <option value="22">22 (10 PM)</option>
                                                            <option value="23">23 (11 PM)</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <label>Minute</label>
                                                        <select name="time" [(ngModel)]="rebooking.time_minutes"
                                                            class="form-control" id="time-min">
                                                            <option value="00">00</option>
                                                            <option value="05">05</option>
                                                            <option value="10">10</option>
                                                            <option value="15">15</option>
                                                            <option value="20">20</option>
                                                            <option value="25">25</option>
                                                            <option value="30">30</option>
                                                            <option value="35">35</option>
                                                            <option value="40">40</option>
                                                            <option value="45">45</option>
                                                            <option value="50">50</option>
                                                            <option value="55">55</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row row-input">
                                            <div class="col-md-4 ">
                                            </div>
                                            <div class="col-md-4 text-center btn-align">
                                                <button type="submit" (click)="rescheduleNow()"
                                                    class="btn btn-primary btn-md" [disabled]="DisableOnReschd"
                                                    [disabled]="!rebooking.date||!rebooking.time_hour||!booking.time_minutes"
                                                    style="border:1px solid #999;">Reschedule Ride </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12 hidden" [hidden]="!driverselect">
                                        <div class="row row-input">
                                            <div class="col-md-6">
                                                <label>Select Car</label>
                                                <div class="select-container">
                                                    <select [(ngModel)]="booking.car" class="form-control" id="car">
                                                        <!-- ng-repeat="cp in corporateFareInfo track by $index" -->
                                                        <option *ngFor="let cp of corporateFareInfo;let i=index;"
                                                            value="{{cp.car_type}}">{{cp.car_name}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <label>Select Driver</label>
                                                <div class="select-container">
                                                    <select [(ngModel)]="booking.driver_id" class="form-control"
                                                        id="car">
                                                        <!-- ng-repeat="d in Drivers track by $index" -->
                                                        <option *ngFor="let d of Drivers; let i=index; "
                                                            value="{{d.driver_id}}">{{d.driver_name}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row row-input hidden">
                                            <div class="col-md-6 text-center btn-align">
                                                <div class="form-group top-15 row row-input">

                                                    <div class="col-md-6">
                                                        <button type="submit" (click)="showLast()"
                                                            class="btn btn-primary btn-md"
                                                            ng-disable="!booking.pickup||!booking.drop||!booking.car"
                                                            style="border:1px solid #999;">Next</button>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <button type="submit" (click)="showTime()"
                                                            class="btn btn-danger btn-md"
                                                            style="border:1px solid #999;">Back</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--OLD MODALS ABOVE for Live page-->

    <div class="modal fade" id="request_ride_later" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle" aria-hidden="true" style="z-index:1150">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content booking-model-component card-shadow">

                <!-- <div class="">
                    <div class="col-sm-12">
                        <button type="button" class="close" data-dismiss="modal" (click)="closePayment()"
                            style="font-size:32px;float:right;padding:5px;">&times;</button>
                    </div>
                </div> -->


                <div class="rb-large-text mx-5 mb-2 mt-5">
                    Choose Date and Time
                </div>

                <hr class="confirm">
                <div class="modal-body mb-5">
                    <div class="panel-body mt-2 mb-5">

                        <div class="col-sm-12 row  ride-later" [hidden]="!stepTimeSelector">

                            <div class="col-md-6">
                                <!-- <label>Pickup Date</label> -->
                                <!-- <input readonly class="form-control field-spacing color" [(ngModel)]="booking.date"
                                    id="date" placeholder="DD - MM - YYYY" /> -->
                                <p-calendar class="form-control calcender color" (onSelect)="onDateChange($event)"
                                    [showIcon]="true" [readonlyInput]="true" [(ngModel)]="bookingDate"
                                    dateFormat="yy-mm-dd,DD" placeholder="DD-MM-YYYY">
                                </p-calendar>
                            </div>

                            <div class="col-md-6">

                                <div class="form-group row row-input">
                                    <div class="col-md-8 row ipad-hour">
                                        <!-- <label>Pickup Hour</label> -->
                                        <select name="time" [(ngModel)]="booking.time_hour"
                                            class="form-control select-field-spacing" id="time">
                                            <option value="00">00 (12 AM)</option>
                                            <option value="01">01 (1 AM)</option>
                                            <option value="02">02 (2 AM)</option>
                                            <option value="03">03 (3 AM)</option>
                                            <option value="04">04 (4 AM)</option>
                                            <option value="05">05 (5 AM)</option>
                                            <option value="06">06 (6 AM)</option>
                                            <option value="07">07 (7 AM)</option>
                                            <option value="08">08 (8 AM)</option>
                                            <option value="09">09 (9 AM)</option>
                                            <option value="10">10 (10 AM)</option>
                                            <option value="11">11 (11 AM)</option>
                                            <option value="12">12 (12 PM)</option>
                                            <option value="13">13 (01 PM)</option>
                                            <option value="14">14 (02 PM)</option>
                                            <option value="15">15 (03 PM)</option>
                                            <option value="16">16 (04 PM)</option>
                                            <option value="17">17 (05 PM)</option>
                                            <option value="18">18 (06 PM)</option>
                                            <option value="19">19 (07 PM)</option>
                                            <option value="20">20 (08 PM)</option>
                                            <option value="21">21 (09 PM)</option>
                                            <option value="22">22 (10 PM)</option>
                                            <option value="23">23 (11 PM)</option>
                                        </select>
                                    </div>
                                    <div class="col-sm-5 no-left ipad-minutes">
                                        <!-- <label>Minute</label> -->
                                        <select name="time" [(ngModel)]="booking.time_minutes"
                                            class="form-control select-field-spacing" id="time-min">
                                            <option value="00">00</option>
                                            <option value="05">05</option>
                                            <option value="10">10</option>
                                            <option value="15">15</option>
                                            <option value="20">20</option>
                                            <option value="25">25</option>
                                            <option value="30">30</option>
                                            <option value="35">35</option>
                                            <option value="40">40</option>
                                            <option value="45">45</option>
                                            <option value="50">50</option>
                                            <option value="55">55</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4"></div>
                            <!-- <div class="col-md-4 mt-2 mb-4 text-center">
                                <button [disabled]="DisableOnload" class="btn ride-confirm-btn button-black btn-spacing"
                                    (click)="timeSelected()">Book
                                    the Ride
                                </button>
                            </div> -->
                        </div>
                    </div>
                </div>
                <hr class="confirm">
                <div class="mb-4 mt-1 rb-btn" align="center">
                    <button [disabled]="DisableOnload" class="btn rb-btn-dark-blue btn-spacing btn-secondary"
                        style="text-transform: initial;"
                        (click)="timeSelected()">
                        Book the Ride
                        <!-- Book Now -->
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade p-2" id="add_to_account" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content selection-dialog">
                <div class="modal-body ">
                    <div class="panel-body" [hidden]="!(booking.manual_destination_address!='')">
                        
                        <div class="row booking-model-component px-1">
                            <div class="col-sm-7 pl-5 pr-4">
                                <div class="rb-mid-text my-3"> Fare Estimates</div>

                                <div class="row">
                                    <div class="col-sm-5">
                                        <div class="mt-3 m-0">
                                            <span class="rb-large-text">
                                                ${{booking. estimated_fare}}
                                            </span>
                                            <span *ngIf="promo_applied" class="original-price">
                                                ${{booking.estimated_fare_later_old}}
                                            </span>
                                        </div>
                                        <span class="rb-grey-mid-text">Request Now</span>
                                    </div>
                                    
                                    <div class="col my-auto">
                                        <img src="/assets/images/divider_large_grey.svg" alt="divider_large">
                                    </div>

                                    <div class="col-sm-5">
                                        <div class="mt-3 m-0">
                                            <span class="rb-large-text">
                                                ${{booking.estimated_fare_later}}
                                            </span>
                                
                                            <span *ngIf="promo_applied" class="original-price">
                                                ${{booking.estimated_fare_later_old}} 
                                            </span>
                                        </div>
                                        <span class="rb-grey-mid-text">Book Later</span>
                                    </div>
                                </div>
                                <!-- <p style="font-size: 14px;">{{booking?.timeInThatArea|date: 'EEEE, MMMM d, y hh:mm a'}}</p> -->
                                <hr>

                                <div class="rb-mid-text my-2">Trip Information </div>

                                <div class="my-3">
                                    <table class="rb-detail-table">
                                        <tr>
                                            <td> <div class="my-1">Pickup time</div> </td>
                                            <td> Pickup time </td>
                                        </tr>
                                        <tr>
                                            <td> <div class="my-1">Pickup Location</div> </td>
                                            <td> {{booking.pickup_location_address}} </td>
                                        </tr>
                                        <tr>
                                            <td> <div class="my-1">Drop Off Location</div> </td>
                                            <td> {{booking.manual_destination_address}} </td>
                                        </tr>
                                    </table>
                                </div>

                                <hr>

                                <!-- If Authorization Request is still in progress then SHOW Waiting loader else SHOW buttons to book Ride (Conditional - Now,later) -->
                                <ng-container *ngIf="!requestPending">
                                    <div class="my-4">
                                        <span *ngIf="!promo_applied" class="rb-mid-text rb-small-size cursor-pointer" (click)="promoPopupShow()">
                                            <i class="fa fa-tag" aria-hidden="true"></i>
                                            Promo Code?    
                                        </span>
                                        <span *ngIf="promo_applied" class="rb-mid-text rb-small-size promo-applied" (click)="promoPopupShow()">
                                            <i class="fa fa-tag" aria-hidden="true"></i>
                                            Promo applied
                                        </span>
                                    </div>

                                    <hr>
                                    
                                    <!-- class="my-4 rb-btn d-flex justify-content-between" -->
                                    <div class="my-4 rb-btn">
                                            <button class="btn btn-sm rb-btn-dark-blue ml-0 mr-3 btn-secondary" [disabled]="DisableOnload" (click)="timeSelected('now')">
                                                Request Now
                                            </button>
                                            <button class="btn btn-sm rb-btn-blue mx-3 btn-primary" (click)="timeScheduler()" data-target="#request_ride_later"  data-toggle="modal">
                                                Book Later
                                            </button>
                                            <button data-dismiss="modal" (click)="cancelAndUnselect()" class="btn btn-sm rb-btn-grey mx-3 btn-secondary">
                                                Cancel
                                            </button>
                                    </div>
                                </ng-container>

                                <div class="text-center" [hidden]="!requestPending">
                                    <span class="request-now-text mt-4">Waiting for rider to confirm the payment</span>
                                    <div class="col-md-12"><img class="loader-img  mt-2"
                                            src="assets/images/loader.gif" />
                                    </div>
                                </div>

                            </div>
                            <div class="col-sm-5 smallmap p-0" style="position: relative;">
                                <img class="rb-img img-responsive" src="{{booking.route_directions}}" alt="Route" />
                            </div>

                        </div>

                        <!-- Old UI -->

                        <!-- <div class="row">
                            <div class="col-sm-1"></div>
                            <div class="col-sm-5 smallfare">
                                <i class="fa fa-bookmark" style="color:#1f8dc6; font-size: 16px;"></i> &nbsp;<span
                                    style="color:#1f8dc6;font-size: 15px;font-weight: 500;">Fare</span>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <h2 class="price-heading"
                                            style="color:#555;text-shadow:none;font-weight:bold; ">
                                            ${{booking.estimated_fare_later}}</h2>
                                        <h3 *ngIf="promo_applied" class="original"
                                            style="color:#555;text-shadow:none;font-weight:bold; ">
                                            ${{booking.estimated_fare_later_old}}</h3>
                                        <p class="">Book Later</p>
                                    </div>
                                    <div class="col-sm-6">
                                        <h2 class="price-heading"
                                            style="color:#555;text-shadow:none;font-weight:bold; ">
                                            ${{booking. estimated_fare}}</h2>
                                        <h3 *ngIf="promo_applied" class="original"
                                            style="color:#555;text-shadow:none;font-weight:bold; ">
                                            ${{booking.estimated_fare_old}}</h3>
                                        <p>Request Now</p>
                                    </div>
                                </div>
                                <p style="font-size: 14px;">{{booking?.timeInThatArea|date: 'EEEE, MMMM d, y hh:mm a'}}
                                </p>
                                <hr>
                                <img src="assets/images/cariconblue.png" class="smfcar"> &nbsp;<span
                                    style="color:#1f8dc6;font-size: 14px;font-weight: 500; float: left;">Trip
                                    details</span>
                                <ul class="triptime mytripspage">
                                    <li>
                                        <p>
                                            <b>{{booking?.timeInThatArea|date: 'd MMMM, y hh:mm a'}}</b><br>
                                            {{booking.pickup_location_address}}
                                        </p>
                                        <div class="verticalLine"></div>
                                    </li>
                                    <li>
                                        <p>
                                            <b></b><br>
                                            {{booking.manual_destination_address}}
                                        </p>
                                    </li>
                                </ul>
                                <hr>

                                <div [hidden]="requestPending">
                                    <span *ngIf="!promo_applied" class="promo-section" (click)="promoPopupShow()"><img
                                            class="promo" src="assets/images/promo.png">
                                        Promo Code?</span>
                                    <span *ngIf="promo_applied" class="promo-section promo-applied"
                                        (click)="promoPopupShow()"><img class="promo" src="assets/images/promo.png">
                                        Promo
                                        applied</span>
                                    <button class="btn  btn-sm rreceipt bookButton" data-target="#request_ride_later"
                                        (click)="timeScheduler()" data-toggle="modal">Book
                                        Later</button>
                                    <button class="btn  btn-sm rreceipt button-green" [disabled]="DisableOnload"
                                    (click)="timeSelected('now')">Request Now</button>
                                    <button data-dismiss="modal" (click)="cancelAndUnselect()"
                                        class="btn btn-primary btn-sm viewbtn">Cancel</button>

                                </div>

                                <div class="text-center" [hidden]="!requestPending">
                                    <span class="request-now-text mt-4">Waiting for rider to confirm the payment</span>
                                    <div class="col-md-12"><img class="loader-img  mt-2"
                                            src="assets/images/loader.gif" />
                                    </div>
                                </div>

                            </div>
                            <div class="col-sm-6 smallmap">
                                <img class="img-responsive" src="{{booking.route_directions}}" alt="Route" />
                            </div>

                        </div> -->

                        <!-- OldUI -->
                    </div>

                </div>
            </div>
        </div>
    </div>


    <!-- This Modal will be displayed to select the card to choose, in Case of only one card enabled or Retry ride, this step is bypassed to use  default card -->

    <div class="modal fade" id="payment_step" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
            <div class="modal-content">

                <div class="">
                    <div class="col-sm-12">
                        <button type="button" class="close" data-dismiss="modal" (click)="closePayment()"
                            style="font-size:32px;float:right;padding:5px;">&times;</button>
                    </div>
                </div>


                <div class="modal-body ">
                    <div class="panel-body y">
                        <div class="col-sm-12 row  ride-later ">
                            <div class="col-md-12 text-center">
                                <h2 class="price-heading">Choose Payment Method</h2>
                            </div>

                            <div class="col-md-6">
                                <label class="radiobox">Corporate Card
                                    <input type="radio" name="cardType" (change)="showCardList()"
                                        [(ngModel)]="booking.cardSelected" [value]="'corporate'" />
                                    <span class="checkmark"></span>
                                </label>
                            </div>
                            <div class="col-md-6">
                                <label class="radiobox">Rider Card
                                    <input type="radio" name="cardType" (change)="showCardList()" [(ngModel)]="booking.cardSelected"
                                        [value]="'rider'" />
                                    <span class="checkmark"></span>
                                </label>
                            </div>

                            <div class="col-lg-12" [hidden]="!corporateCards">
                                <div class="page-header">
                                </div>
                                <table class="table table-responsive trips shrinked ">
                                    <thead>
                                        <tr class="frow">
                                            <th scope="col">ID </th>
                                            <th scope="col">Card Type</th>
                                            <th scope="col">Card Number</th>
                                            <th scope="col">Default</th>
                                            <th scope="col">Added On</th>
                                            <th scope="col">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody *ngIf="Cards.length > 0">
                                        <tr *ngFor="let card of Cards; let i=index">
                                            <td>{{card.id}}</td>
                                            <td>{{card.card_type}}</td>
                                            <td>{{card.last4_digits}}</td>
                                            <td><a href="javascript:;" (click)="(!card.default_card) ? setDefaultCard(card.id) : doNothing() "
                                                    class="callToAction" [ngClass]="{disabled : (card.default_card==1)}" >Make it Default</a></td>
                                            <td>{{card.card_added_on |date:'MM/dd/yyyy '}}</td>
                                            <td>
                                                <label class="radiobox">
                                                    <input type="radio" name="corporateCard" [checked]="card.default_card ? 1 : 0"
                                                        [value]="card.id" [(ngModel)]="booking.cardIdCorporate" />
                                                    <span class="checkmark"></span>
                                                </label>
                                            </td>
                                        </tr>
                                    </tbody>
                                    <tbody *ngIf="Cards.length == 0">
                                        <tr>
                                            <td colspan="6" class="text-center">No Card Found</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col-lg-12" [hidden]="!riderCards">
                                <div class="page-header">
                                </div>
                                <table class="table table-responsive trips shrinked ">
                                    <thead>
                                        <tr class="frow">
                                            <th scope="col">ID </th>
                                            <th scope="col">Card Type</th>
                                            <th scope="col">Card Number</th>
                                            <th scope="col">Default</th>
                                            <th scope="col">Added On</th>
                                            <th scope="col">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody *ngIf="RiderCards.length > 0">
                                        <tr *ngFor="let card of RiderCards;let i=index">
                                            <td>{{card.id}}</td>
                                            <td>{{card.card_type}}</td>
                                            <td>{{card.last4_digits}}</td>
                                            <td><a href="javascript:;"
                                                    (click)="(!card.default_card) ? setDefaultCard(card.id) : doNothing() "
                                                    class="callToAction" [ngClass]="{disabled : (card.default_card==1)}"
                                                    >Make it Default</a></td>
                                            <td>{{card.card_added_on |date:'MM/dd/yyyy '}}</td>
                                            <td>
                                                <label class="radiobox">
                                                    <input type="radio" name="rideCard" [checked]="(card.default_card ? 1 : 0)"
                                                        [value]="card.id" [(ngModel)]="booking.cardIdUser" />
                                                    <span class="checkmark"></span>
                                                </label>
                                            </td>
                                        </tr>
                                    </tbody>
                                    <tbody *ngIf="RiderCards.length == 0">
                                        <tr>
                                            <td colspan="6" class="text-center">No Card Found</td>
                                        </tr>
                                    </tbody>
                                </table>

                            </div>
                            <hr class="confirm">

                            <div class="col-md-4"></div>

                            <!-- Conditional buttons based on CARD selected for Rider or Corporate-->
                            <div [hidden]="!(booking.card_user_type == 1)" class="col-md-4 mt-2 mb-4 text-center">

                                <!-- Conditional buttons based on Ride selected for Corporate Card (Now or later)-->
                                <button (click)="BookRideRightNow()" *ngIf="paymentForNow" [disabled]="DisbleOnBRN"
                                    class="btn ride-confirm-btn button-black promocode-btn">Process Request</button>
                                <button (click)="BookRideLater()" *ngIf="paymentForLater" [disabled]="DisbleOnPFL"
                                    class="btn ride-confirm-btn button-black promocode-btn">Process Request</button>

                            </div>

                            <!-- Conditional buttons based on CARD selected for Rider , In this case we need to Ask for Authorization-->
                            <div [hidden]="!(booking.card_user_type == 0)" class="col-md-4 mt-2 mb-4 text-center">

                                <button (click)="checkRiderAuthorization()" [disabled]="disableCRA"
                                    class="btn ride-confirm-btn button-black promocode-btn">Process
                                    Request!</button>

                            </div>
                        </div>

                    </div>

                </div>
            </div>
        </div>
    </div>


    <div class="modal fade" id="request_right_now" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-body ">
                    <div class="panel-body y">
                        <div class="col-sm-12 row text-center ">
                            <span class="request-now-text mt-4">Requesting a ride now</span>
                            <div class="col-md-12"><img class="loader-img  mt-2" src="assets/images/loader.gif" /></div>

                            <div class="col-md-4"></div>
                            <!-- cancelRightNow() -->

                            <div class="col-md-4 mt-5 mb-3 text-center"><button (click)="cancelRidePopup(session_id)"
                                    data-dismiss="modal" class="btn btn-primary ride-confirm-btn ">Cancel</button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="request_right_now_1" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-body ">
                    <div class="panel-body confirm-body">
                        <div class="col-sm-12 row text-center ">
                            <div class="col-md-12 text-center">
                                <p class="request">You are requesting now a ride for <br><span
                                        class="userTopick1">{{booking.user_name}}</span> to be pickup at <span
                                        class="pickup-location">{{booking.pickup_location_address}}</span></p>
                            </div>

                            <div class="col-md-2"></div>
                            <div class="col-md-4 mt-4 text-center"><button (click)="cancelRightNow()"
                                    data-dismiss="modal"
                                    class="btn btn-primary ride-confirm-btn button-black">Cancel</button> </div>
                            <div class="col-md-4 mt-4 text-center"><button (click)="BookRideRightNow()"
                                    class="btn btn-primary ride-confirm-btn">Yes</button> </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="show_confirmation" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-body ">

                    <div class="panel-body confirm-body" [hidden]="!booking.confirmNow">
                        <div class="col-sm-12 row text-center">
                            <p class="text-height">
                                A driver will come and Pick
                                <span class="userTopick">{{booking.user_name}}</span> 
                                    at the requested time at
                                <span class="pickup-location">
                                    {{booking.pickup_location_address}}</span>
                            </p>
                            <hr class="confirm">
                            <div class="col-md-4"></div>
                            <div class="col-md-4 text-center"><button (click)="closeConfirm()"
                                    class="btn btn-primary ride-confirm-btn btn-spacing">OK</button> </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="show_cardError" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-body ">
                    <div class="panel-body confirm-body" [hidden]="!cardAlert">
                        <div class="col-sm-12 row text-center">
                            <span class="close-dismiss" (click)="closeCard()">×</span>
                            <p>You need to add a card for the payment method.</p>
                            <hr class="confirm">
                            <div class="col-md-4"></div>
                            <div class="col-md-4 text-center"><button data-toggle="modal" (click)="closeCard()"
                                    data-target="#add_card" class="btn btn-primary ride-confirm-btn ">Add Card</button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="show_PaymentError" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">

                <div class="">
                    <div class="col-sm-12">
                        <button type="button" class="close" data-dismiss="modal" (click)="closePayment()"
                            style="font-size:32px;float:right;padding:5px;">&times;</button>
                    </div>
                </div>

                <div class="modal-body ">
                    <div class="panel-body confirm-body" [hidden]="!paymentAlert">
                        <div class="col-sm-12  text-center">
                            <h2 *ngIf="invalid_card">Payment Unsuccessful </h2>
                            <p *ngIf="invalid_card">Please update your Card Details.</p>
                            <h2 *ngIf="!invalid_card">Add New Card</h2>
                            <p *ngIf="!invalid_card">Please Add your Card Details.</p>
                            <hr class="confirm">
                            <div class="row justify-content-center">

                                <div class="col-md-3 text-center">
                                    <button data-toggle="modal" (click)="closePayment()" data-target="#add_card"
                                        class="btn btn-primary ride-confirm-btn button-black ">Add Card</button>
                                </div>
                                <div class="col-md-3 text-center" *ngIf="invalid_card">
                                    <button (click)="closeandCard();" data-dismiss="modal"
                                        class="btn btn-primary ride-confirm-btn ">Update</button>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="showRiderCardError" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="">
                    <div class="col-sm-12">
                        <button type="button" class="close" data-dismiss="modal"
                            style="font-size:32px;float:right;padding:5px;">&times;</button>
                    </div>
                </div>
                <div class="modal-body ">
                    <div class="panel-body confirm-body">
                        <div class="col-sm-12  text-center">

                            <p class="line-spacing">There is no available payment method option. Do you want to send a
                                link to your Rider to
                                add
                                a payment method through Qudos Rider app or at rider portal at www.rideQudos.com to
                                complete
                                the ride Request.</p>
                            <hr class="confirm">
                            <div class="row">
                                <div class="col-md-4"></div>
                                <div class="col-md-4 text-center">
                                    <button (click)="sendRiderCardLink()"
                                        class="btn btn-primary ride-confirm-btn btn-spacing">Yes,
                                        Please Send Link</button>
                                </div>
                                <div class="col-md-4 text-center">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="showRiderAuthorization" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">

                <div class="">
                    <div class="col-sm-12">
                        <button type="button" class="close" data-dismiss="modal"
                            style="font-size:32px;float:right;padding:5px;">&times;</button>
                    </div>
                </div>
                <div class="modal-body ">
                    <div class="panel-body confirm-body">
                        <div class="col-sm-12  text-center">

                            <p>
                                You are requesting a ride on behalf of the rider's payment method, we will send a
                                message to
                                the rider to confirm authorization to proceed.</p>
                            <hr class="confirm">
                            <div class="row">
                                <div class="col-md-4"></div>
                                <div class="col-md-4 text-center">

                                    <!-- Conditional buttons based on Ride selected for now or later-->
                                    <button (click)="sendRiderCardAuthorization('Now')" *ngIf="paymentForNow"
                                        class="btn btn-primary ride-confirm-btn ">Yes, Please Send Request</button>
                                    <button (click)="sendRiderCardAuthorization('Later')" *ngIf="paymentForLater"
                                        class="btn btn-primary ride-confirm-btn ">Yes, Please Send Request</button>
                                </div>
                                <div class="col-md-4 text-center">

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="rider_payment_otp" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="row modaltitle">
                    <div class="col-sm-12">
                        <button type="button" class="close" data-dismiss="modal"
                            style="font-size:32px;float:right;padding:5px;">&times;</button>
                    </div>
                </div>
                <div class="modal-body ">
                    <div class="row modalrow">
                        <div class="col-md-8 offset-md-2 text-center">
                            <p>An OTP is sent to {{userMobileToAdd}} and need to be entered below for the Ride request
                                to
                                proceed.</p>
                        </div>
                        <div class="col-sm-6 text-center col-sm-offset-3">
                            <label>Enter OTP</label>
                            <div class="input-container text-center">
                                <input type="text" placeholder="0000" onkeypress="return isNumberKeys(event)"
                                    maxlength="4" [(ngModel)]="booking.cardOTP" class="form-control  text-center">
                            </div>
                        </div>
                        <div class="col-sm-6 text-center col-sm-offset-3">
                            <div class="text-center">
                                <a href="javascript:;" class="callToAction" (click)="reSendRiderOTP();">Resend OTP</a>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 addbtn">
                            <div class="btn-align">

                                <!-- Conditional buttons based on Ride selected for now or later-->

                                <button (click)="BookRideRightNow()" *ngIf="paymentForNow"
                                    class="btn btn-primary ride-confirm-btn button-black">Process Request</button>
                                <button (click)="BookRideLater()" *ngIf="paymentForLater"
                                    class="btn btn-primary ride-confirm-btn button-black">Process Request</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="promoCodeEnter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content card-shadow booking-model-component">
                <!-- <div class="row modaltitle" style="float: right;padding: 0;padding-right: 6px;">
                    <div class="col-sm-12">
                        Enter Promo
                    </div>
                </div> -->
                <div class="mx-5 mt-5 mb-2 rb-large-text">
                    Enter Promo Code
                </div>
                <hr class="confirm">
                <div class="modal-body my-2 mx-5">
                    <div class="row modalrow">

                        <!-- <div class="col-sm-8 col-sm-offset-3" style="margin:0 auto;"> -->
                            <div class="input-container">
                                <input type="text" placeholder="Enter Promo Code" [(ngModel)]="booking.promo_code"
                                    class="form-control" />
                            </div>
                        <!-- </div> -->

                    </div>
                </div>
                <hr class="confirm">
                <div class="row rb-btn mt-1 mb-4">
                    <div class="col-md-3"></div>
                    <div class="col-md-3 text-center">
                        <button data-dismiss="modal" (click)="closeandCancel();"
                            class="btn btn btn-secondary rb-btn-grey ride-confirm-btn">Cancel</button>
                    </div>
                    <div class="col-md-3 text-center">
                        <button (click)="closeandApply();"
                            class="btn btn-primary rb-btn-dark-blue ride-confirm-btn">Apply</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="add_card" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">

        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="row modaltitle">
                    <div class="col-sm-12">
                        <button type="button" class="close" data-dismiss="modal"
                            style="font-size:32px;float:right;padding:5px;">&times;</button>
                        <h5 id="mtitle" style="text-align: center;font-size: 19px;">Add Card </h5>
                    </div>

                </div>
                <div class="modal-body">

                    <div class="col-sm-12">

                        <form enctype="multipart/form-data" action="#" method="post" name="myCardForm"
                            id="payment-form">
                            <div class="row modalrow">
                                <div class="col-sm-12 text-center">
                                    <div id="card-element">
                                        <!-- A Stripe Element will be inserted here. -->
                                        <iframe frameborder="0" allowtransparency="true" scrolling="no" name="__privateStripeFrame35220"
                                            allowpaymentrequest="true"
                                            src="https://js.stripe.com/v3/elements-inner-card-446a3597526e5cd55d5f68e47d59a688.html#style[base][fontSize]=16px&amp;style[base][color]=%2332325d&amp;componentName=card&amp;wait=false&amp;rtl=false&amp;keyMode=test&amp;apiKey=pk_test_x0nIalqvXaliqoYO9Qdcb94Q&amp;origin=http%3A%2F%2F127.0.0.1%3A8887&amp;referrer=http%3A%2F%2F127.0.0.1%3A8887%2F%23%2Fcorporate%2FlistCards&amp;controllerId=__privateStripeController35216"
                                            title="Secure card payment input frame"
                                            style="border: none !important; margin: 0px !important; padding: 0px !important; width: 1px !important; min-width: 100% !important; overflow: hidden !important; display: block !important; user-select: none !important; transform: translateZ(0px) !important; height: 19.2px;"></iframe><input
                                            class="__PrivateStripeElement-input" aria-hidden="true" aria-label=" " autocomplete="false" maxlength="1"
                                            style="border: none !important; display: block !important; position: absolute !important; height: 1px !important; top: 0px !important; left: 0px !important; padding: 0px !important; margin: 0px !important; width: 100% !important; opacity: 0 !important; background: transparent !important; pointer-events: none !important; font-size: 16px !important;">
                                    </div>
                                </div>
                                <div class="col-sm-12 text-center ">
                                    <!-- Used to display Element errors. -->
                                    <div id="card-errors" role="alert"></div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12 addbtn">
                                    <div class="btn-align">
                                        <button type="submit" class="button submit btn btn-primary btn-md">Save
                                            Card</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="no_User_old" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">

                <div class="">
                    <div class="col-sm-12">
                        <button type="button" class="close" data-dismiss="modal" (click)="closePayment()"
                            style="font-size:32px;float:right;padding:5px;">&times;</button>

                    </div>

                </div>

                <div class="modal-body ">
                    <div class="panel-body confirm-body" [hidden]="!paymentAlert">
                        <div class="col-sm-12  text-center">
                            <h2>User is not registered with us.</h2>
                            <p>Please Register it first .</p>
                            <hr class="confirm">
                            <div class="row">
                                <div class="col-md-3"></div>
                                <div class="col-md-3 text-center">
                                    <button (click)="closeNoUser()" data-dismiss="modal"
                                        class="btn btn-primary ride-confirm-btn button-black ">Register it</button>
                                </div>
                                <div class="col-md-3 text-center">
                                    <button (click)="closeandReBook();" data-dismiss="modal"
                                        class="btn btn-primary ride-confirm-btn ">Update</button>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>


    <div class="modal fade show" id="no_User" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">

                <div class="">
                    <div class="col-sm-12">
                        <button type="button" class="close" data-dismiss="modal" (click)="closePayment()"
                            style="font-size:32px;float:right;padding:5px;">&times;</button>

                    </div>

                </div>

                <div class="modal-body ">
                    <div class="panel-body confirm-body" [hidden]="!paymentAlert">
                        <div class="col-sm-12  text-center">
                            <h2>User is not registered with us.</h2>
                            <p>Please Register it first .</p>
                            <hr class="confirm">
                            <div class="row">
                                <div class="col-md-3"></div>
                                <div class="col-md-3 text-center">
                                    <button (click)="createUser()"
                                        class="btn btn-primary ride-confirm-btn button-black ">Add User</button>
                                </div>
                                <div class="col-md-3 text-center">
                                    <button (click)="createUserandProceed()"
                                        class="btn btn-primary ride-confirm-btn ">Proceed Anyway</button>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>



    <div class="modal fade" id="add_myUser" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content otp-dialog">
                <div class="row modaltitle">
                    <div class="col-sm-12">
                        <button type="button" class="close" data-dismiss="modal"
                            style="font-size:32px;float:right;padding:5px;">&times;</button>
                        <h5 id="mtitle" style="text-align: center;font-size:1.171875rem;">Add User To Account</h5>
                    </div>

                </div>
                <div class="modal-body ">

                    <div class="row modalrow">
                        <div class="col-md-8 offset-md-2 text-center">
                            <p class="text-height">An OTP is sent to {{userMobileToAdd}} and need to be entered below
                                for the new ride
                                request
                                to proceed.</p>
                        </div>
                        <div class="col-sm-6 text-center col-sm-offset-3">
                            <label>Enter OTP</label>
                            <div class="input-container text-center">
                                <input type="text" placeholder="0000" onkeypress="return isNumberKeys(event)"
                                    maxlength="4" [(ngModel)]="otpToAdd" class="form-control  text-center otp-field">
                                <input type="hidden" [(ngModel)]="userToAdd" class="form-control  ">
                                <input type="hidden" [(ngModel)]="userMobileToAdd" class="form-control  ">
                            </div>
                        </div>
                        <div class="col-sm-6 text-center col-sm-offset-3">
                            <div class="text-center">
                                <button class="btn-links" [disabled]="DisableResnd" href="javascript:;"
                                    (click)="reAddUser();">Resend OTP</button>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 addbtn">
                            <div class="btn-align">
                                <button type="button" (click)="completeUserAdd()" class="btn btn-primary btn-md add-btn"
                                    [disabled]="onInvalidOtp" style="border:1px solid #999;">Add User</button>
                            </div>

                        </div>
                    </div>
                </div>
                <!-- <div *ngIf="loadings" class="loaders" style="z-index: 9999;"> <span><img src="app/img/ring-alt.svg"></span></div> -->
            </div>
        </div>
    </div>



    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">

    </div>
</div>

<script>
    //$('#phone').focus();
    $('#extPopTwo').val('+1');
    $("#phone").intlTelInput({
        initialCountry: 'us',
        autoPlaceholder: "off"
    });

    $(document).on("countrychange", "#phone", function (e, countryData) {
        $('#extPopTwo').val('+' + countryData.dialCode); // do something with countryData
        localStorage.setItem("countryCode", countryData.dialCode); // do something with countryData
        //angular.element($('#request_ride_later')).scope().showDirection(1);
    });

    $('#date').datepicker({
        //format: 'DD, mm MM yyyy',
        format: 'yyyy-mm-dd, DD',
        startDate: '0d',
        autoclose: true
    });

    $('#bookdate').datepicker({
        //format: 'DD, mm MM yyyy',
        format: 'yyyy-mm-dd, DD',
        startDate: '0d',
        autoclose: true
    });


    $(window).resize(function () {
        //console.log($('.page.page-h').height(),$('.page.page-h').height()-190);
        $('.table-full').css({ "max-height": $('.page.page-h').height() - 190 + "px", "min-height": $('.page.page-h').height() - 190 + "px" });
    });

    /*
     /*This function was used to hide/show the name of the Drivers*/

    $('.slider').on('click', function () {
        $('#toggleSwitch').prop('checked', (!$('#toggleSwitch').prop('checked')));
        if ($('#toggleSwitch').prop('checked') != true) {
            // $('#map div.gm-style-iw-a').hide();
        } else {
            //  $('#map div.gm-style-iw-a').show();
        }
    });

    function imageCheck() {
        $('.center-block.image').height($('.center-block.image').width());
        /*$('.listing').each(function(i,d){
            if($(this).height() > 49){		$(this).find('.ride-status').css({'line-height':$(this).height()-20+"px",'height':$(this).height()-20+"px",});
            }
        });*/
        setTimeout(function () {
            imageCheck()
        }, 500);
    }
    setTimeout(function () {
        imageCheck()
    }, 1000);

    $(document).on('show.bs.modal', '.modal', function (event) {
        var zIndex = 1040 + (10 * $('.modal:visible').length);
        $(this).css('z-index', zIndex);
        setTimeout(function () {
            $('.modal-backdrop').not('.modal-stack').css('z-index', zIndex - 1).addClass('modal-stack');
        }, 0);
    });

    // function isNumberKey(evt) {
    //     var charCode = (evt.which) ? evt.which : event.keyCode;
    //     //console.log(charCode);

    //     if (charCode == 43) return true;

    //     if (charCode < 48 || charCode > 57)
    //         return false;

    //     return true;
    // }
    // function isNumberKeys(evt) {
    //     var charCode = (evt.which) ? evt.which : event.keyCode;
    //     //console.log(charCode);

    //     if (charCode < 48 || charCode > 57)
    //         return false;

    //     return true;
    // }
</script>

<script type="text/ng-template" id="driverDetails">
		<h4 class="bgcolotdialog">Driver Information</h4>
		<div class="row">
			<div class="col-sm-4">
				<img src="{{driver_image}}" class="drvimg">
			</div>
			<div class="col-sm-8">
				<strong>Driver Name:</strong>{{driver_name}}<br>
				<strong>Mobile:</strong>{{driver_mobile}}<br>
				<strong>Driver Email:</strong>{{driver_email}}<br>
				<strong>Device Name:</strong>{{device_name}}<br>
				<strong>Car Name:</strong>{{car_name}}<br>
				<strong>Car No.:</strong>{{car_no}}
			</div>
		</div>
</script>